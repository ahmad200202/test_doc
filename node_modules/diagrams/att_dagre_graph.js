!function(angular){var attDagreGraph=angular.module(window.AppName+".attDagreGraph",[]);attDagreGraph.directive("attDagreGraph",function(){return{restrict:"E",replace:!0,scope:{data:"="},template:'<div style="height:100%;width:100%"><svg id="graphContainer" width="100%" height="100%" class="attErdDiagram"></svg></div>',link:function(scope,element){var renderFunc=function(newVal,oldVal){if(0!=newVal.length||oldVal!=newVal){for(var g=(new dagreD3.graphlib.Graph).setGraph({}),i=0;i<newVal.nodes.length;i++)g.setNode(newVal.nodes[i].id,{label:newVal.nodes[i].label});for(var i=0;i<newVal.links.length;i++)g.setEdge(newVal.links[i].source,newVal.links[i].target,{label:""});var render=new dagreD3.render,svg=d3.select(element[0]).select("#graphContainer");$(element[0]).find("#graphContainer").empty();var svgGroup=svg.append("g"),zoom=d3.behavior.zoom().on("zoom",function(){svgGroup.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")});svg.call(zoom),render(svgGroup,g);var xCenterOffset=($(svg[0]).width()-g.graph().width)/2;svgGroup.attr("transform","translate("+xCenterOffset+", 20)")}};renderFunc(scope.data,scope.data)}}})}(angular);