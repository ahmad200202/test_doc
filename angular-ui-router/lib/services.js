"use strict";function $uiRouterProvider($locationProvider){function $get($location,$browser,$window,$sniffer,$rootScope){return ng1LocationService._runtimeServices($rootScope,$location,$sniffer,$browser,$window),delete router.router,delete router.$get,router}router=this.router=new core_1.UIRouter,router.stateProvider=new stateProvider_1.StateProvider(router.stateRegistry,router.stateService),router.stateRegistry.decorator("views",views_1.ng1ViewsBuilder),router.stateRegistry.decorator("onExit",onEnterExitRetain_1.getStateHookBuilder("onExit")),router.stateRegistry.decorator("onRetain",onEnterExitRetain_1.getStateHookBuilder("onRetain")),router.stateRegistry.decorator("onEnter",onEnterExitRetain_1.getStateHookBuilder("onEnter")),router.viewService._pluginapi._viewConfigFactory("ng1",views_1.getNg1ViewConfigFactory()),router.urlService.config._decodeParams=!1;var ng1LocationService=router.locationService=router.locationConfig=new locationServices_1.Ng1LocationServices($locationProvider);return locationServices_1.Ng1LocationServices.monkeyPatchPathParameterType(router),router.router=router,router.$get=$get,$get.$inject=["$location","$browser","$window","$sniffer","$rootScope","$http","$templateCache"],router}function runBlock($injector,$q,$uiRouter){if(core_1.services.$injector=$injector,core_1.services.$q=$q,!Object.prototype.hasOwnProperty.call($injector,"strictDi"))try{$injector.invoke(function(){})}catch(error){$injector.strictDi=!!/strict mode/.exec(error&&error.toString())}$uiRouter.stateRegistry.get().map(function(x){return x.$$state().resolvables}).reduce(core_1.unnestR,[]).filter(function(x){return"deferred"===x.deps}).forEach(function(resolvable){return resolvable.deps=$injector.annotate(resolvable.resolveFn,$injector.strictDi)})}function watchDigests($rootScope){$rootScope.$watch(function(){core_1.trace.approximateDigests++})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getLocals=exports.watchDigests=void 0;var angular_1=require("./angular"),core_1=require("@uirouter/core"),views_1=require("./statebuilders/views"),templateFactory_1=require("./templateFactory"),stateProvider_1=require("./stateProvider"),onEnterExitRetain_1=require("./statebuilders/onEnterExitRetain"),locationServices_1=require("./locationServices"),urlRouterProvider_1=require("./urlRouterProvider");angular_1.ng.module("ui.router.angular1",[]);var mod_init=angular_1.ng.module("ui.router.init",["ng"]),mod_util=angular_1.ng.module("ui.router.util",["ui.router.init"]),mod_rtr=angular_1.ng.module("ui.router.router",["ui.router.util"]),mod_state=angular_1.ng.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),mod_main=angular_1.ng.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),mod_cmpt=angular_1.ng.module("ui.router.compat",["ui.router"]),router=null;$uiRouterProvider.$inject=["$locationProvider"];var getProviderFor=function(serviceName){return["$uiRouterProvider",function($urp){var service=$urp.router[serviceName];return service.$get=function(){return service},service}]};runBlock.$inject=["$injector","$q","$uiRouter"];var getUrlRouterProvider=function(uiRouter){return uiRouter.urlRouterProvider=new urlRouterProvider_1.UrlRouterProvider(uiRouter)},getStateProvider=function(){return core_1.extend(router.stateProvider,{$get:function(){return router.stateService}})};watchDigests.$inject=["$rootScope"],exports.watchDigests=watchDigests,mod_init.provider("$uiRouter",$uiRouterProvider),mod_rtr.provider("$urlRouter",["$uiRouterProvider",getUrlRouterProvider]),mod_util.provider("$urlService",getProviderFor("urlService")),mod_util.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return router.urlMatcherFactory}]),mod_util.provider("$templateFactory",function(){return new templateFactory_1.TemplateFactory}),mod_state.provider("$stateRegistry",getProviderFor("stateRegistry")),mod_state.provider("$uiRouterGlobals",getProviderFor("globals")),mod_state.provider("$transitions",getProviderFor("transitionService")),mod_state.provider("$state",["$uiRouterProvider",getStateProvider]),mod_state.factory("$stateParams",["$uiRouter",function($uiRouter){return $uiRouter.globals.params}]),mod_main.factory("$view",function(){return router.viewService}),mod_main.service("$trace",function(){return core_1.trace}),mod_main.run(watchDigests),mod_util.run(["$urlMatcherFactory",function(){}]),mod_state.run(["$state",function(){}]),mod_rtr.run(["$urlRouter",function(){}]),mod_init.run(runBlock),exports.getLocals=function(ctx){var tokens=ctx.getTokens().filter(core_1.isString),tuples=tokens.map(function(key){var resolvable=ctx.getResolvable(key),waitPolicy=ctx.getPolicy(resolvable).async;return[key,"NOWAIT"===waitPolicy?resolvable.promise:resolvable.data]});return tuples.reduce(core_1.applyPairs,{})};