!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@uirouter/core"),require("angular")):"function"==typeof define&&define.amd?define(["exports","@uirouter/core","angular"],factory):(global=global||self,factory(global["@uirouter/angularjs-resolve-service"]={},global["@uirouter/core"],global.angular))}(this,function(exports,core,angular){"use strict";var $resolve={resolve:function(invocables,locals,parent){void 0===locals&&(locals={});var parentNode=new core.PathNode(new core.StateObject({params:{},resolvables:[]})),node=new core.PathNode(new core.StateObject({params:{},resolvables:[]})),context=new core.ResolveContext([parentNode,node]);context.addResolvables(core.resolvablesBuilder({resolve:invocables}),node.state);var resolveData=function(parentLocals){var rewrap=function(_locals){return core.resolvablesBuilder({resolve:core.mapObj(_locals,function(local){return function(){return local}})})};context.addResolvables(rewrap(parentLocals),parentNode.state),context.addResolvables(rewrap(locals),node.state);var tuples2ObjR=function(acc,tuple){return acc[tuple.token]=tuple.value,acc};return context.resolvePath().then(function(results){return results.reduce(tuples2ObjR,{})})};return parent?parent.then(resolveData):resolveData({})}},resolveFactory=function(){return $resolve};angular.module("ui.router").factory("$resolve",resolveFactory),exports.resolveFactory=resolveFactory,Object.defineProperty(exports,"__esModule",{value:!0})});