!function(angular){"use strict";var commonDirectives=angular.module("attCommon.commonDirectives");commonDirectives.directive("hideMenuOnResize",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element){function resizeHandlerFn(){var btns=targetElement.find(".resizeBtnWrap"),resizeMenu=element.find(".resizeMenuWrap"),btns_width=0,showMenu=!1,targetElement_width=targetElement.width();if(resizeMenu)if("L"==scope.menuPosition){var width=Math.min(resizeMenu.width(),200)+"px";resizeMenu.attr("style","left:calc(100% - "+width+")")}else resizeMenu.attr("style","");for(var i=0;i<btns.length;i++){var btn_id=$(btns[i]).find("button").attr("id");!showMenu&&targetElement_width>btns_width+$(btns[i]).width()?(btns_width+=$(btns[i]).width(),$(btns[i]).css("visibility","visible").css("width","auto"),null!=btn_id&&""!=btn_id&&$("li#"+btn_id).css("display","none")):(showMenu=!0,$(btns[i]).css("visibility","hidden"),null!=btn_id&&""!=btn_id&&$("li#"+btn_id).css("display","inline"))}showMenu?element.css("visibility","visible"):element.css("visibility","hidden"),targetElement[0].style.position=""}var targetElement=element.parents(".resizeWrapper").find(".buttonsResizeContainer");targetElement&&(addResizeListener(targetElement[0],resizeHandlerFn),$timeout(function(){resizeHandlerFn()}),scope.$on("$destroy",function(){removeResizeListener(targetElement[0],resizeHandlerFn)})),$timeout(function(){scope.reApi&&(scope.reApi.doMenuResize=function(){resizeHandlerFn()})})}}}]),commonDirectives.directive("attActionBar",["$document",function(){return{scope:{actions:"=?",headerCssClass:"@",menuPosition:"@",api:"=?"},restrict:"E",replace:!0,templateUrl:"scripts/angular.common/attActionBar/attActionBar.html",link:function(scope){(null==scope.menuPosition||""==scope.menuPosition)&&(scope.menuPosition="L"),scope.getText=function(act){var ret="";return act&&(ret=angular.isFunction(act)?act():act),ret},scope.reApi={},null==scope.api&&(scope.api={}),scope.api.applyResize=function(){setTimeout(function(){scope.reApi.doMenuResize&&scope.reApi.doMenuResize()},150)},scope.initButton=function(){scope.api.applyResize()},scope.onClick=function(att_action,e){att_action.action(e),document.activeElement.blur()}}}}])}(angular);