$.fn.d3Click=function(){this.each(function(index,object){var event=document.createEvent("MouseEvents");event.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),object.dispatchEvent(event)})},$.fn.d3Trigger=function(eventName){this.each(function(index,object){var event=document.createEvent("Event");event.initEvent(eventName,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),object.dispatchEvent(event)})};var AttChartUtils={getOrderString:function(order){if("number"==typeof order)switch(order){case 0:return"ones";case 1:return"tens";case 2:return"hundreds";case 3:return"thousands";case 6:return"millions";case 9:return"billions";case 12:return"trillions";case 15:return"quadrillions";case 18:return"quintillions";case 21:return"sextillions";case 28:return"septillions";case-1:return"tenths";case-2:return"hundredths";case-3:return"thousandths";case-6:return"millionths";case-9:return"billionths";case-12:return"trillionths"}return console.log('getOrderString: Unknown order value or type: order "'+order+'" has type '+typeof order),""},getOrderOfMagnitude:function(num){if("number"!=typeof num||0>num)return-1;var magnitude=Math.round(Math.log(num)/Math.LN10);return magnitude-magnitude%3},getAxisSubLabel:function(factor){return 1e3==factor?"("+AttChartUtils.getOrderString(3)+")":1e6==factor?"("+AttChartUtils.getOrderString(6)+")":1e9==factor?"("+AttChartUtils.getOrderString(9)+")":1==factor?"(seconds)":60==factor?"(minutes)":factor>=3600?"("+AttChartUtils.getHourPrefix(factor)+"hours)":""},getValueOfObjectFieldInArray:function(array,index,key){if(!array||array.length<1)return"";var value=array[index];return"string"==typeof key&&(value=value[key]),value},getDataPixelLength:function(data,formatter,field,selector){if(!data||data.length<1)return 0;formatter=formatter||function(x){return""+x};var str,item=Utils.objectFindByKey(data,0,field);-1===item&&(item=data[0]),str=formatter(this.getValueOfObjectFieldInArray(data,0,field));for(var i=data.length-1;i>0&&i>data.length-4;i--){var item=formatter(this.getValueOfObjectFieldInArray(data,i,field));item.length>str.length&&(str=item)}return this.getLabelPixelLength(str,selector)},getStringPixelLength:function(str,selector){selector||(selector="body");var id="text-size-test";$(selector).append('<span id="'+id+'">'+str+"1</span>");var $testEl=$("#"+id),width=$testEl.width();return $testEl.remove(),width},getLabelPixelLength:function(str,selector){selector||(selector="body");var id="text-size-test",svg=d3.selectAll(selector).append("svg:svg").attr("id",id).append("svg:g"),text=svg.selectAll("g.text").data([str]).enter().append("svg:text").text(function(d){return d}),width=text.node().getBBox().width;return svg.selectAll("*").remove(),$("#"+id).remove(),width},getStringPixelHeight:function(str,selector){selector||(selector="body");var id="text-size-test";$(selector).append('<span id="'+id+'">'+str+"1</span>");var $testEl=$("#"+id),height=$testEl.height();return $testEl.remove(),height},getPixelHeight:function(selector){return this.getStringPixelHeight("ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()[]{};:<>,.?-=_+",selector)},getLabelRotationInfo:function(xDomainValues,xscale,formatter,field,selector){var degreesFromHorizontal=-65,maxIndex=xDomainValues.length-1,labelPixelLength=this.getDataPixelLength(xDomainValues,formatter,field,selector)+4,maxVal=this.getValueOfObjectFieldInArray(xDomainValues,maxIndex,field),minVal=this.getValueOfObjectFieldInArray(xDomainValues,0,field),pixelsBetweenFirstAndLastPoint=xscale(maxVal)-xscale(minVal),shouldRotate=xDomainValues.length>1&&(xDomainValues.length-1)*labelPixelLength>=pixelsBetweenFirstAndLastPoint,rotatedPixelHeight=0;if(shouldRotate){var degreesFromVertical=90-Math.abs(degreesFromHorizontal),radians=.0174532925*degreesFromVertical;rotatedPixelHeight=labelPixelLength*Math.cos(radians)}return{shouldRotate:shouldRotate,labelPixelLength:labelPixelLength,rotatedPixelHeight:rotatedPixelHeight}},getHourPrefix:function(factor){if(factor%3600!==0)return"";var magnitude=AttChartUtils.getOrderOfMagnitude(factor/3600);return magnitude>2?AttChartUtils.getOrderString(magnitude)+" of ":""},getCheckedPrecision:function(value,precision){return value>1e3?0:precision},formatTicks:function(ticks){var formatFunction=function(diff,isAllIntegers){if(isAllIntegers)return function(x){return AttChartUtils.commaSeparateNumber(x,0)};var strDiff=""+diff,re=new RegExp("[^1-9]+"),match=re.exec(strDiff),maxNumDecimalDigits=match[0].length-match[0].indexOf(".");return function(x){return AttChartUtils.commaSeparateNumber(x,maxNumDecimalDigits)}};if("undefined"==typeof ticks)return function(x){return x};var isAllIntegers=!1,diff=Math.abs(ticks[0]-ticks[1]);return diff>=1?isAllIntegers=!0:ticks.every(function(x){return x%1==0})&&(isAllIntegers=!0),formatFunction(diff,isAllIntegers)},clearExtraLabels:function(selector,data,chartWidth,field){var maxCharHeight=chartWidth/data.length,printEvery=1,charHeight=this.getPixelHeight(selector);if(charHeight>maxCharHeight&&(printEvery=Math.ceil(charHeight/maxCharHeight)),1==printEvery)return data;for(var datasetCopy=[],i=0;i<data.length;i++){var label="";if(0===i||i%printEvery===0)if(label=this.getValueOfObjectFieldInArray(data,i,field),"undefined"==typeof field)datasetCopy.push(label);else{var item={};item[field]=label,datasetCopy.push(item)}}return datasetCopy},commaSeparateNumber:function(val,precision){if(val=this.checkInputForNumericString(val),"number"!=typeof val)return val;("undefined"==typeof precision||0>precision||parseInt(precision)!==precision)&&(precision=this.getCheckedPrecision(val,1));var rounder=Math.pow(10,precision);val=Math.round(Number(val)*rounder)/rounder;var displayVal=val.toFixed(precision);return displayVal.replace(/(^|[^\w.])(\d{4,})/g,function($0,$1,$2){return $1+$2.replace(/\d(?=(?:\d\d\d)+(?!\d))/g,"$&,")})},commaSeparateDuration:function(val){return val=this.checkInputForNumericString(val),"number"!=typeof val?val:this.commaSeparateNumber(val,0)+"s"},commaSeparateSize:function(val){return val=this.checkInputForNumericString(val),"number"!=typeof val?val:this.commaSeparateNumber(val,0)+"b"},labelWithBytes:function(val){return val=this.checkInputForNumericString(val),"number"!=typeof val?val:Math.abs(val)>=Math.pow(1024,6)||Math.abs(val)>=Math.pow(1024,5)&&val/Math.pow(1024,5)>=1e3?this.commaSeparateNumber(val/Math.pow(1024,6),-1)+"Eb":Math.abs(val)>=Math.pow(1024,5)||Math.abs(val)>=Math.pow(1024,4)&&val/Math.pow(1024,4)>=1e3?this.commaSeparateNumber(val/Math.pow(1024,5),-1)+"Pb":Math.abs(val)>=Math.pow(1024,4)||Math.abs(val)>=Math.pow(1024,3)&&val/Math.pow(1024,3)>=1e3?this.commaSeparateNumber(val/Math.pow(1024,4),-1)+"Tb":Math.abs(val)>=Math.pow(1024,3)||Math.abs(val)>=Math.pow(1024,2)&&val/Math.pow(1024,2)>=1e3?this.commaSeparateNumber(val/Math.pow(1024,3),1)+"Gb":Math.abs(val)>=Math.pow(1024,2)||Math.abs(val)>=1024&&val/1024>=1e3?this.commaSeparateNumber(val/Math.pow(1024,2),1)+"Mb":Math.abs(val)>=1e3?this.commaSeparateNumber(val/1024,1)+"kb":this.commaSeparateNumber(val,0)+"b"},labelWithAmounts:function(val,precision){var unit="";return"string"==typeof val&&(val.endsWith("T")?unit="T":val.endsWith("B")?unit="B":val.endsWith("M")?unit="M":val.endsWith("k")&&(unit="k")),val=this.checkInputForNumericString(val),"number"!=typeof val?val:Math.abs(val)>=1e12?this.commaSeparateNumber(val/1e12,precision)+"T":Math.abs(val)>=1e9?this.commaSeparateNumber(val/1e9,precision)+"B":Math.abs(val)>=1e6?this.commaSeparateNumber(val/1e6,precision)+"M":Math.abs(val)>=1e3?this.commaSeparateNumber(val/1e3,precision)+"k":(precision=0,parseInt(val)<val&&(precision=1),this.commaSeparateNumber(val,precision)+unit)},convertToDuration:function(val,precision){if(val=this.checkInputForNumericString(val),"number"!=typeof val)return val;var dur,decoration="",hours=val/3600,minutes=val/60;return Math.abs(parseFloat(hours))>1?(dur=hours,decoration="h"):Math.abs(parseFloat(minutes))>1?(dur=minutes,decoration="m"):(dur=val,decoration="s",precision=0),this.commaSeparateNumber(dur,precision)+decoration},trimDurationStringMillis:function(val,precision){if(!val||"string"!=typeof val||"number"!=typeof precision||isNaN(precision))return val;var parts=val.split(":");if(3!==parts.length){for(var newParts=[],i=0;3>i;++i)if(i>parts.length-1){var nextPart="00"+(2===i?"."+Array(precision+1).join("0"):"");newParts.push(nextPart)}else{var nextPart=parts[i].length>0?parts[i]:"00";newParts.push(nextPart)}parts=newParts}var decimals,secParts=parts[2].split(".");return 2!==secParts.length?decimals=Array(precision+1).join("0"):(decimals=secParts[1],decimals.length<precision?decimals+=Array(precision-decimals.length+1).join("0"):decimals.length>precision&&(decimals=decimals.substring(0,precision))),parts[2]=secParts[0]+"."+decimals,parts[0]+":"+parts[1]+":"+parts[2]},checkInputForNumericString:function(val){if("string"==typeof val){var temp=parseFloat(val);return isNaN(temp)?val:temp}return val},sortArrayByObjectField:function(arr,field,direction,aggregateName){if(arr&&arr.length>1){arr.sort(function(a,b){return"desc"===direction||"descending"===direction?-1*(""+a[field]).localeCompare(""+b[field],void 0,{numeric:!0}):(""+a[field]).localeCompare(""+b[field],void 0,{numeric:!0})});aggregateName&&$.each(arr,function(index,obj){if(obj[field]===aggregateName){var removedArr=arr.splice(index,1);return arr.push(removedArr[0]),!1}})}},sortArrayByAggregationLevel:function(arr,field){var months={jan:"01",feb:"02",mar:"03",apr:"04",may:"05",jun:"06",jul:"07",aug:"08",sep:"09",oct:"10",nov:"11",dec:"12"};arr&&arr.length>1&&(16===arr[0][field].length?arr.sort(function(a,b){var e=a[field].split(" "),f=b[field].split(" "),c=e[0].split("-").join(""),d=f[0].split("-").join("");return c=""+c+e[1].replace(":",""),d=""+d+f[1].replace(":",""),c-d}):17===arr[0][field].length?arr.sort(function(a,b){var e=a[field].split(" "),f=b[field].split(" "),c=e[0].split("-");c[1]=months[c[1].toLowerCase()],c=c.reverse().join("");var d=f[0].split("-");return d[1]=months[d[1].toLowerCase()],d=d.reverse().join(""),c=""+c+e[1].replace(":",""),d=""+d+f[1].replace(":",""),c-d}):11===arr[0][field].length?arr.sort(function(a,b){var c=a[field].split("-");c[1]=months[c[1].toLowerCase()],c=c.reverse().join("");var d=b[field].split("-");return d[1]=months[d[1].toLowerCase()],d=d.reverse().join(""),c-d}):7===arr[0][field].length?arr.sort(function(a,b){var c=a[field].split(".").reverse().join(""),d=b[field].split(".").reverse().join("");return c-d}):8===arr[0][field].length&&arr.sort(function(a,b){var c=a[field].split(" ");c[0]=months[c[0].toLowerCase()],c=c.reverse().join("");var d=b[field].split(" ");return d[0]=months[d[0].toLowerCase()],d=d.reverse().join(""),c-d}))},isEmptyData:function(data){if(!data||$.isEmptyObject(data)||data.length<1)return!0;if("object"==typeof data){var hasData=!1;return $.each(Object.keys(data),function(i,keyName){var value=data[keyName];if(!value)return!0;var isArray=Array.isArray(value);return isArray&&value.length>0||!isArray&&!$.isEmptyObject(value)?(hasData=!0,!1):void 0}),!hasData}return!1},autoSelectScale:function(data,element,offset,dimension,isDate,isTime,graphType,dateFormatter){var min,max;if(isDate){dateFormatter?(min=d3.min(data,function(d){return new Date(dateFormatter(d[element]))}),max=d3.max(data,function(d){return new Date(dateFormatter(d[element]))})):(min=d3.min(data,function(d){return new Date(d[element])}),max=d3.max(data,function(d){return new Date(d[element])}));var daysDiff=(max.getTime()-min.getTime())/864e5,tick_jump=1,tick_freq=d3.time.days;if(daysDiff>1e4)tick_freq=d3.time.years,tick_jump=5,min=d3.time.year.floor(min),max=d3.time.year.floor(max),min.setFullYear(10*Math.floor(min.getFullYear()/10)),max.setFullYear(10*Math.ceil(max.getFullYear()/10));else if(daysDiff>3650)tick_freq=d3.time.years,min=d3.time.year.floor(min),max=d3.time.year.ceil(max);else if(daysDiff>730)tick_freq=d3.time.months,tick_jump=3,min=d3.time.year.floor(min),max=d3.time.year.ceil(max);else if(daysDiff>180)tick_freq=d3.time.months,min=d3.time.month.floor(min),max=d3.time.month.ceil(max);else if(daysDiff>25)tick_jump=7,min=d3.time.day.floor(min),max=d3.time.day.ceil(max);else if(1>=daysDiff){min=d3.time.hour.floor(min),max=d3.time.hour.ceil(max);var hoursDiff=(max.getTime()-min.getTime())/36e5;1>=hoursDiff?(tick_freq=d3.time.minutes,tick_jump=5):7>=hoursDiff?(tick_freq=d3.time.minutes,tick_jump=10*Math.floor(hoursDiff/2)):tick_freq=d3.time.hours}else 3>=daysDiff&&(tick_freq=d3.time.hours,tick_jump=6,min=d3.time.day.floor(min),max=d3.time.day.ceil(max));return{min:min,max:max,factor:1,tick_freq:tick_freq,tick_jump:tick_jump,scale:d3.time.scale().domain([min,max]).range([offset,dimension])}}if("att-line-chart"==graphType?(min=d3.min(data,function(d){return d3.min(d.value,function(v){return+v[element]})}),max=d3.max(data,function(d){return d3.max(d.value,function(v){return+v[element]})})):"att-stacked-chart"==graphType?(min=0,max=d3.max(data[data.length-1],function(d){return d.y0+d[element]})):"att-bar-chart"==graphType?(min=0,max=d3.max(data,function(d){return+d[element]})):(min=d3.min(data,function(d){return+d[element]}),max=d3.max(data,function(d){return+d[element]})),max!==min||!isTime)if(Math.floor(min)==min&&0!=min?min--:min>1&&(min=Math.floor(min)),Math.ceil(max)==max&&100!=max)max++;else if(max>1){var maxRnd=Math.round(max);maxRnd!=max&&Math.abs(max-maxRnd)<1e-5&&(max=maxRnd),max=Math.ceil(max)}var range=max-min,factor=1;isTime?(range>18e3?factor=3600:range>300?factor=60:0===range&&(60>max?(factor=1,min=min>0?min:min-factor):3600>max?(factor=60,min-=factor):(factor=3.6*Math.pow(10,this.getOrderOfMagnitude(max)),min-=factor),max+=factor),factor>1&&(min=Math.floor(min/factor),max=Math.ceil(max/factor))):(max>1e9?factor=1e9:max>1e6?factor=1e6:max>1e4&&(factor=1e3),min/=factor,max/=factor);var span=1;range=max-min;for(var i=0;10>i;i++){if(10*span>=range){min=Math.floor(min/span)*span;var oldMax=max;max=Math.ceil(max/span)*span,0==min&&max>1.25*(oldMax-min)&&(max=Math.ceil(oldMax));break}span*=10}return{min:min,max:max,factor:factor,scale:d3.scale.linear().domain([min,max]).range([offset,dimension])}},escapeChartObjectId:function(str){return str.replace(/&/g,"AND").replace(/\n/,"NL").replace(/</g,"LT").replace(/>/g,"GT").replace(/"/g,"DQUOT").replace(/'/g,"SQUOT").replace("\\","BACKSLASH")},setD3Size:function(d3Object,width,height,doParent){var $node=$(d3Object.node());$node.css("width",width),$node.css("width",height),doParent&&($node.parent().width(width),$node.parent().height(height))},clearAllChartSelections:function(skipBubbleOpacity){d3.selectAll('rect[pivotSelected="1"]').each(function(){d3.select(this).style("fill",d3.select(this).attr("data-fill")).attr("pivotSelected","0").attr("selected","0")}),d3.selectAll('text[selected="1"]').each(function(){d3.select(this).attr("selected","0")}),d3.selectAll('.bubble[bubbleSelected="1"]').each(function(){d3.select(this).style("fill",d3.select(this).attr("data-fill")).attr("bubbleSelected","0")}),skipBubbleOpacity||d3.selectAll(".bubble[opacity]").each(function(){d3.select(this).attr("opacity","0.01").attr("selected","0").attr("pivotSelected","0")}),d3.selectAll('.attBarChartBar[pivotSelected="1"]').each(function(){d3.select(this).style("fill",d3.select(this).attr("data-fill")).attr("pivotSelected","0").attr("selected","0")}),d3.selectAll('.slice[pivotSelected="1"]').each(function(){d3.select(this).style("fill",d3.select(this).attr("origFill")).attr("pivotSelected","0").attr("selected","0")}),d3.selectAll("line.selected").each(function(){d3.select(this).attr("pivotSelected","0").attr("selected","0")}),d3.selectAll('circle[pivotData][pivotSelected="1"][data-fill]').each(function(){d3.select(this).style("fill",d3.select(this).attr("data-fill")).attr("pivotSelected","0").attr("selected","0")}),d3.selectAll('.attBarChartBar[barSelected="1"]').each(function(){d3.select(this).style("fill",d3.select(this).attr("data-fill")).attr("barSelected","0").attr("selected","0")})},simulatePieClick:function($slice){var element=d3.select("#"+$slice.attr("id")),selected=0==element.attr("selected")?1:0;element.attr("selected",selected),element.attr("pivotSelected",selected),element.style("fill",element.attr(selected?"selectColor":"deselectColor"))},simulateBarClick:function(parentId,barId,selectedColor){selectedColor=selectedColor||"gold";var element=d3.select("#"+parentId).select('rect[bar-id="'+barId+'"]'),selected=0==element.attr("barSelected")?1:0,unselectedColor=element.attr("data-fill");element.attr("barSelected",selected),element.style("fill",selected?selectedColor:unselectedColor)},simulateStackedBarClick:function(parentId,xBarVal,selectedColor){selectedColor=selectedColor||"gold";var rects=d3.select("#"+parentId).selectAll('rect[xBar="'+xBarVal+'"]');if(rects){var selected="0";rects.each(function(){return"0"===d3.select(this).attr("selected")?(selected="1",!1):void 0}),rects.attr("selected",selected).attr("pivotSelected",selected).style("fill",function(){return"1"===selected?selectedColor:d3.select(this).attr("data-fill")})}},addDisplayData:function(data,chartWidth,selector){if(data&&!(data.length<1)){var charHeight=this.getPixelHeight(selector),maxCharHeight=chartWidth/data.length,printEvery=1;charHeight>maxCharHeight&&(printEvery=Math.ceil(charHeight/maxCharHeight)),data[0].display=!0;for(var i=1;i<data.length;i++)data[i].display=i%printEvery==0}},drawYAxisTitle:function(svg,title,titleColor,factor,height,pad,isTime,putOnMultiLines,forcedNumberOfLines){if(title){var titles;if(titles=putOnMultiLines?title.split(" "):[title],void 0!==forcedNumberOfLines&&"number"==typeof forcedNumberOfLines)for(;titles.length<forcedNumberOfLines;)titles.push("");for(var xOffset=-1*(height-pad[1]-pad[3])/2-pad[1],i=0;i<titles.length;i++)svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",xOffset).attr("y",pad[0]).attr("dy",".75em").attr("transform","rotate(-90,0,0)").text(titles[i]),pad[0]+=15;(factor>1||1==factor&&isTime)&&(svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",xOffset).attr("y",pad[0]).attr("dy",".75em").attr("transform","rotate(-90,0,0)").text(AttChartUtils.getAxisSubLabel(factor)),pad[0]+=15)}},drawYAxisRightTitle:function(svg,title,titleColor,factor,width,height,pad,isTime){title&&(svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",(height-pad[1]-pad[3])/2+pad[1]).attr("y",-width+pad[2]).attr("dy",".75em").attr("transform","rotate(90,0,0)").text(title),pad[2]+=15,(factor>1||1==factor&&isTime)&&(svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",(height-pad[1]-pad[3])/2+pad[1]).attr("y",-width+pad[2]).attr("dy",".75em").attr("transform","rotate(90,0,0)").text(AttChartUtils.getAxisSubLabel(factor)),pad[2]+=15))},drawXAxisTitle:function(svg,title,factor,xpos,h,ypos,isTime){return title&&(svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",xpos).attr("y",ypos+20).text(title),h+=30,(factor>1||1==factor&&isTime)&&(svg.append("svg:text").attr("class","att-axis-title").attr("text-anchor","middle").attr("x",xpos).attr("y",ypos+35).text(AttChartUtils.getAxisSubLabel(factor)),h+=15)),h},addChartTitle:function(configObj,svg,height,width){if(configObj.title){var text=svg.append("text").attr("x",width/2).attr("y",0).attr("class","att-chart-title").style("text-anchor","middle").style("stroke","#58595b").text(configObj.title);if(text&&!text.empty()){var bbox={height:0};try{bbox=text.node().getBBox()}catch(e){}finally{bbox=bbox||{height:0}}var titleHeight=bbox.height,titleOffset=titleHeight/2+2,newHeight=height+titleHeight;return text.attr("y",titleOffset),svg.attr("height",newHeight),$(svg.node()).parent().height(newHeight),titleHeight}}return 0},adjustChartTitle:function(svg){if(svg){var title=svg.selectAll(".att-chart-title");if(title){var rules=svg.selectAll(".rule").selectAll("line"),midpoint=0;rules.each(function(){var line=d3.select(this),x1=parseFloat(line.attr("x1")),x2=parseFloat(line.attr("x2"));return midpoint=x1+(x2-x1)/2,!1});var x=parseFloat(title.attr("x"));title.attr("transform","translate("+(midpoint-x)+", 0)")}}},adjustResolutionSelector:function(chartId,svgWidth,EventManager){var chartSelector="#"+chartId,chart=$(chartSelector);if(chart&&chart.length>0){var adjustMethod=function(){setTimeout(function(){var widget=chart.find(".attResolutionSelector"),rules=d3.select(chartSelector).selectAll(".rule").selectAll("line");widget&&rules&&rules.each(function(){var line=d3.select(this),x1=parseFloat(line.attr("x1")),x2=parseFloat(line.attr("x2")),midpoint=x1+(x2-x1)/2,chartWidth=svgWidth+parseInt(chart.css("margin-left"))+parseInt(chart.css("margin-right")),chartMidpoint=chartWidth/2,svgOffset=(chartWidth-svgWidth)/2,offset=2*(midpoint+svgOffset-chartMidpoint);return offset>0?(widget.css("margin-left",offset+"px"),widget.css("margin-right","0")):(widget.css("margin-right",-1*offset+"px"),widget.css("margin-left","0")),!1})},0)};if(EventManager){var eventName="attResolutionSelector:render:id="+chartId;EventManager.destroy(eventName),EventManager.on(eventName,function(){adjustMethod()})}else adjustMethod()}},getTitleHeight:function(svg){if(svg){var title=svg.select(".att-chart-title");if(title&&!title.empty())return title.node().getBBox().height}return 0},getXAxisTitleHeight:function(svg){if(svg){var title=svg.select(".att-axis-title");if(title&&!title.empty()){var transform=d3.transform(title.attr("transform")),isXAxis=!transform||0===transform.rotate;if(isXAxis)return title.node().getBBox().height}}return 0},getPaddingSpaceForAxis:function(ticks,formatter){if(!ticks)return 0;formatter&&"function"==typeof formatter||(formatter=function(x){return x});var maxLength=d3.max(ticks,function(d){return(formatter(d)+"").length});return 8*maxLength+20},getTooltipLines:function(dataPoint,tooltipFormatInfo,yElement){yElement=yElement||"y";var format=tooltipFormatInfo,line1="",line2="",line3="",SPACE=" ",yValue=dataPoint[yElement],yTitle=dataPoint.yAxisTitle?SPACE+dataPoint.yAxisTitle:"",xTitle=dataPoint.xAxisTitle?SPACE+dataPoint.xAxisTitle:"";switch(format.yValueType){case"percent":yValue=Math.round(100*dataPoint.y)/100,yTitle=dataPoint.category?SPACE+dataPoint.category:"",xTitle="";break;case"int":yValue=AttChartUtils.commaSeparateNumber(dataPoint.y,0),yTitle="",xTitle="";break;case"decimal":yValue=AttChartUtils.commaSeparateNumber(dataPoint[yElement],2);break;case"byte":yValue=AttChartUtils.labelWithBytes(dataPoint[yElement]);break;case"duration":yValue=AttChartUtils.convertToDuration(dataPoint[yElement]);break;case"labeled_decimal":yValue=AttChartUtils.labelWithAmounts(dataPoint[yElement])}line1+=yValue,format.yValueDecorator&&(line1+=SPACE+format.yValueDecorator),line2+=yTitle,format.zVerbOrPreposition&&(line2+=SPACE+format.zVerbOrPreposition),dataPoint.category&&(line2+=SPACE+dataPoint.category),format.xVerbOrPreposition&&(line3+=SPACE+format.xVerbOrPreposition),line3+=xTitle,line3+=SPACE+dataPoint.x;var lines=[line1];return line2&&lines.push(line2),line3&&lines.push(line3),lines},buildChartPivots:function(pivotPointObj){return ObjectUtils.isEmpty(pivotPointObj)?"":encodeURIComponent(JSON.stringify(pivotPointObj))},addPowertip:function(selector,message,position){return selector&&"undefined"!=typeof message&&null!==message&&"#"!==selector?(position||(position="ne"),$(selector).data("powertip",message),$(selector).powerTip({placement:position,followMouse:!1,smartPlacement:!0,closeDelay:150,fadeOutTime:150})):void 0},addMouseTrackedPowertip:function(selector,message,position){if(!selector||"undefined"==typeof message||null===message||"#"===selector)return void 0;var $element=$(selector);if($element.length<1)return void 0;var tooltip;try{$element.data("powertip",message),tooltip=$element.powerTip({placement:position,followMouse:!0,closeDelay:5,fadeInTime:10,fadeOutTime:10,closeEvents:["click","mouseleave","blur"]})}catch(err){}return tooltip},showPowertip:function(selector){if(selector)try{$(selector).powerTip("show")}catch(err){}},hidePowertip:function(selector){if(selector)try{$(selector).powerTip("hide")}catch(err){}},hideAllPowertips:function(){try{$.powerTip.hide()}catch(err){}},getChartPowertipText:function(lines){if(!lines)return"";for(var text='<span class="att-hover-tip-headers">',i=0;i<lines.length;i++)text+=lines[i],0==i&&(text+="</span>"),i<lines.length-1&&(text+="<br/>");return text},getPowertip:function(selector,lines){var text=this.getChartPowertipText(lines);text&&(this.addMouseTrackedPowertip(selector,text,"n"),this.showPowertip(selector))},getSelectedCharts:function(selector){var selectorText=selector?"":'[selector="'+selector+'"]',rectText='rect[pivotData][pivotSelected="1"]'+selectorText,bubbleText='.bubble[bubbleSelected="1"][pivotData]'+selectorText,barchartBarText='.attBarChartBar[pivotSelected="1"]'+selectorText,sliceText='.slice[pivotSelected="1"]'+selectorText,lineText="line.selected[pivotData]"+selectorText,circleText='circle[pivotData][pivotSelected="1"]'+selectorText,timeSeries='.attBarChartBar[barSelected="1"]'+selectorText,treemapText='rect[pivotSelected="1"]'+selectorText,dataTableText="#table1 tbody tr.row_selected",searchText=dataTableText+", "+rectText+", "+bubbleText+", "+barchartBarText+", "+sliceText+", "+lineText+", "+circleText+", "+timeSeries+", "+treemapText;return $(searchText)},getChartsLegendSize:function(){return 8*this.getChartsMaxTextLength()},getChartsMaxTextLength:function(){return 32},getAttunityChartTrendLineColor:function(){return"#ffc533"},getAttunityChartSelectionColor:function(){return"black"},getAttunityChartUnselectedColor:function(){return"#3182bd"},getAttunityChartSelectedOpacity:function(){return.7},getAttunityChartUnselectedOpacity:function(){return.01},getAttunityColorScheme:function(){return this.getAttunityDistinctColorScheme()},getAttunityDistinctColorScheme:function(){return["#3182bd","#756bb1","#b2bc33","#ffc533","#636363","#79aed4","#9e97c8","#c9d070","#ffd670","#929292","#98c0de","#bab5d8","#d8dd99","#ffe299","#b1b1b1","#c1d9eb","#d6d3e8","#e8ebc2","#ffeec2","#d0d0d0"]},getAttunityLineOverlayScheme:function(){return this.getAttunityColorScheme().slice(1)}};