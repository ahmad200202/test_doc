!function(){!function(){var that,locale,AttUtilsService,__spreadArrays=this&&this.__spreadArrays||function(){for(var s=0,i=0,il=arguments.length;il>i;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;il>i;i++)for(var a=arguments[i],j=0,jl=a.length;jl>j;j++,k++)r[k]=a[j];return r},injections=["locale","attUtilsService"],AuxiliaryValidationType=function(){function AuxiliaryValidationType(){this.number=null,this.required=null,this.max=null,this.min=null}return AuxiliaryValidationType}(),AuxiliaryInfoType=function(){function AuxiliaryInfoType(){this.validation=null,this.version=null,this.prop_item_level=null,this.value=null,this.displayName=null,this.ui_type=null,this.ui_name=null}return AuxiliaryInfoType}(),createService=function(_locale,_attUtilsService){return locale=_locale,AttUtilsService=_attUtilsService,that=new VersionPolicyService},versionPolicyModule=angular.module("attCommon.versionPolicyModule",[]);versionPolicyModule.factory("VersionPolicyService",__spreadArrays(injections,[createService]));var EnumUIObject=function(){function EnumUIObject(){}return EnumUIObject}(),VersionPolicyService=function(){function VersionPolicyService(){this._currentVersion="",this._previousVersionChecks={},this.Const={ATT_FIELD_TAG:"att-field",COMPILED:"compiled",EnableDisable:"EnableDisable"}}return VersionPolicyService.prototype.setRelatedReplicateVersion=function(replicateVersion){that._currentVersion!==replicateVersion&&(that._currentVersion=replicateVersion)},VersionPolicyService.prototype.getRelatedReplicateVersion=function(){return""==that._currentVersion?"9.9.9":that._currentVersion},VersionPolicyService.prototype.clearRelatedReplicateVersion=function(){that._currentVersion=""},VersionPolicyService.prototype.getFieldAuxDoObject=function(msgName,fieldName){var msgObj=window[msgName];if(!msgObj)return null;var auxInfo=msgObj.getAuxiliaryInfo(fieldName),auxInfoType=new AuxiliaryInfoType,auxInfoKeys=Object.keys(auxInfo);return auxInfoKeys.forEach(function(key){if("validation"==key){auxInfoType.validation=new AuxiliaryValidationType;var auxValidationKeys=Object.keys(auxInfo.validation);auxValidationKeys.forEach(function(validationKey){auxInfoType.validation[validationKey]=auxInfo.validation[validationKey]})}else auxInfoType[key]=auxInfo[key]}),auxInfoType},VersionPolicyService.prototype.isAaaEqualOrBiggerThenBbb=function(stringVersionAAA,stringVersionBBB){if(stringVersionAAA&&"9"===stringVersionAAA.charAt(0))return!0;if(stringVersionBBB&&"9"===stringVersionBBB.charAt(0))return!1;if(null==stringVersionAAA||null==stringVersionBBB||""===stringVersionAAA||""===stringVersionBBB)return!1;if(stringVersionAAA===stringVersionBBB)return!0;var compareVersionsKey=stringVersionAAA+">="+stringVersionBBB;if(null!=that._previousVersionChecks[compareVersionsKey])return that._previousVersionChecks[compareVersionsKey];if(stringVersionAAA.indexOf(".")>0||stringVersionBBB.indexOf(".")>0){for(var doGoOn=!0,aaaArray=stringVersionAAA.split("."),bbbArray=stringVersionBBB.split("."),maxLengthCheck=aaaArray.length,index=0;maxLengthCheck>index&&doGoOn;index++){var iNumberAAA=Number(aaaArray[index]),iNumberBBB=Number(bbbArray[index]);iNumberAAA>iNumberBBB?(that._previousVersionChecks[compareVersionsKey]=!0,doGoOn=!1):iNumberBBB>iNumberAAA?(that._previousVersionChecks[compareVersionsKey]=!1,doGoOn=!1):index+1===maxLengthCheck&&(that._previousVersionChecks[compareVersionsKey]=aaaArray.length>=bbbArray.length)}return that._previousVersionChecks[compareVersionsKey]}return Number(stringVersionAAA)>=Number(stringVersionBBB)},VersionPolicyService.prototype.isAaaEqualOrSmallerThenBbb=function(stringVersionAAA,stringVersionBBB){if(null==stringVersionAAA||null==stringVersionBBB||""==stringVersionAAA||""==stringVersionBBB)return!1;if(stringVersionAAA===stringVersionBBB)return!0;var smlCompareVersionsKey=stringVersionAAA+"<="+stringVersionBBB;if(null!=that._previousVersionChecks[smlCompareVersionsKey])return that._previousVersionChecks[smlCompareVersionsKey];if(stringVersionAAA.indexOf(".")>0||stringVersionBBB.indexOf(".")>0){for(var doGoOn=!0,aaaArray=stringVersionAAA.split("."),bbbArray=stringVersionBBB.split("."),maxLengthCheck=aaaArray.length<=bbbArray.length?aaaArray.length:bbbArray.length,index=0;maxLengthCheck>index&&doGoOn;index++){var iNumberAAA=Number(aaaArray[index]),iNumberBBB=Number(bbbArray[index]);iNumberBBB>iNumberAAA?(that._previousVersionChecks[smlCompareVersionsKey]=!0,doGoOn=!1):iNumberAAA>iNumberBBB?(that._previousVersionChecks[smlCompareVersionsKey]=!1,doGoOn=!1):index+1===maxLengthCheck&&(that._previousVersionChecks[smlCompareVersionsKey]=aaaArray.length<=bbbArray.length)}return that._previousVersionChecks[smlCompareVersionsKey]}return Number(stringVersionAAA)<=Number(stringVersionBBB)},VersionPolicyService.prototype.getMajorVersion=function(fullReplicateVersion){return fullReplicateVersion.substr(0,3)},VersionPolicyService.prototype.isMajorVersionEqualsToCurrent=function(majorVersion){if(ObjectUtils.isEmpty(majorVersion))return!1;var fullReplicateVersion=that.getRelatedReplicateVersion();if(ObjectUtils.isEmpty(fullReplicateVersion))return!1;var baseReplicate=that.getMajorVersion(fullReplicateVersion);return baseReplicate===majorVersion},VersionPolicyService.prototype.isCurrentVersionMinimum=function(minVersion){if(ObjectUtils.isEmpty(minVersion))return!1;var relatedReplicateVersion=that.getRelatedReplicateVersion();return ObjectUtils.isEmpty(relatedReplicateVersion)?!1:that.isAaaEqualOrBiggerThenBbb(relatedReplicateVersion,minVersion)},VersionPolicyService.prototype.isCurrentVersionMaximumAndEqual=function(maxVersion){if(ObjectUtils.isEmpty(maxVersion))return!1;if(that.isMajorVersionEqualsToCurrent(maxVersion))return!0;var relatedReplicateVersion=that.getRelatedReplicateVersion();return ObjectUtils.isEmpty(relatedReplicateVersion)?!1:that.isAaaEqualOrSmallerThenBbb(relatedReplicateVersion,maxVersion)},VersionPolicyService.prototype.isDoObjectFullPropAllowInCurrentVersion=function(stringFullProp){if(ObjectUtils.isEmpty(stringFullProp))return!1;var parts=stringFullProp.split("."),doParent=parts[1],doProp=parts[2];return ObjectUtils.isEmpty(doParent)||ObjectUtils.isEmpty(doProp)?!1:that.isFieldSupprtedIncurrentVersion(doParent,doProp)},VersionPolicyService.prototype.isFieldSupprtedIncurrentVersion=function(msgName,fieldName){var msgClass=window[msgName];if(!msgClass)return!1;if("function"==typeof msgClass[fieldName])return!1;var auxiliaryInfo=msgClass.getAuxiliaryInfo(fieldName);if(!auxiliaryInfo)return!1;if(!auxiliaryInfo.version)return!0;var relatedReplicateVersion=that.getRelatedReplicateVersion();return!ObjectUtils.isEmpty(relatedReplicateVersion)&&that.isAaaEqualOrBiggerThenBbb(relatedReplicateVersion,auxiliaryInfo.version)},VersionPolicyService.prototype.setAuxiliaryInfoVersion=function(msgName,fieldName,versionVal){var msgClass=window[msgName];msgClass&&msgClass.setAuxiliaryInfo(fieldName,"version",versionVal)},VersionPolicyService.prototype.MapEnumToUIObject=function(enumName){var ret=[];if(null==enumName)return console.log("MapEnumToUIObject --> enumName is empty"),ret;var msgClass=window[enumName];if(!msgClass)return console.log("MapEnumToUIObject --> no such enum: "+enumName),ret;var enumKeys=[];return Object.keys(msgClass).forEach(function(key){"function"!=typeof msgClass[key]&&that.isFieldSupprtedIncurrentVersion(enumName,key)&&enumKeys.push(key)}),ret=enumKeys.map(function(key){var UIObj=new EnumUIObject,auxInfo=msgClass.getAuxiliaryInfo(key);return UIObj.name=auxInfo.displayName,UIObj.type=key,UIObj})},VersionPolicyService.prototype.printFieldDbg=function(attrs){if(Utils.isDebugMode()){if(console.log("DEBUG: formField"),console.log("attrs: ",attrs),!ObjectUtils.isEmpty(attrs.prop)){var parts=attrs.prop.toString().split("."),doParent=parts[1],doProp=parts[2];if(!ObjectUtils.isEmpty(doParent)&&!ObjectUtils.isEmpty(doProp)){var fieldAux=that.getFieldAuxDoObject(doParent,doProp);console.log("fieldAux: ",JSON.stringify(fieldAux))}}console.log()}},VersionPolicyService.prototype.elemTemplate=function(element,attrs){if(ObjectUtils.isEmpty(attrs.model)||ObjectUtils.isEmpty(attrs.prop))return that.printFieldDbg(attrs),"<div>UI ERROR: missing attribute</div>";if(!attrs.autoform&&!ObjectUtils.get(window,attrs.prop))return that.printFieldDbg(attrs),"<div>UI ERROR: cannot find data for: ["+attrs.prop+"]</div>";var uiType=null,doProp=attrs.prop,doParent=null,fullProp=attrs.prop;if(attrs.autoform&&attrs.parent_prop&&null!=attrs.parent_prop&&"null"!==attrs.parent_prop&&(attrs.force="true",fullProp=attrs.parent_prop+"."+attrs.prop),fullProp.indexOf(".")>-1){var parts=fullProp.split(".");doParent=parts[1],doProp=parts[2]}var forceValidation=!ObjectUtils.isEmpty(attrs.force)&&"true"===attrs.force,skipVersionValidation=!forceValidation&&!ObjectUtils.isEmpty(attrs.uitype),pathModel=attrs.model+"."+doProp,template="";if(!skipVersionValidation){var fieldAux_1=that.getFieldAuxDoObject(doParent,doProp);if(!fieldAux_1)return that.printFieldDbg(attrs),"<div>UI ERROR: missing '_Aux' data or '_Aux' attributes</div>";if(!that.isFieldSupprtedIncurrentVersion(doParent,doProp))return that.printFieldDbg(attrs),""}var fieldAux=that.getFieldAuxDoObject(doParent,doProp),messageValidation=fieldAux?fieldAux.validation:null;if(skipVersionValidation){if(ObjectUtils.isEmpty(attrs.uitype))return that.printFieldDbg(attrs),"<div>UI ERROR: missing attribute: 'uitype'</div>";uiType=attrs.uitype}else uiType=attrs.autoform?attrs.uitype:fieldAux.ui_type,ObjectUtils.isEmpty(attrs.label)&&(attrs.label=fieldAux.ui_name);element.addClass(uiType),attrs.disabled&&element.removeAttr("disabled"),element.data("disabled")&&(attrs.disabled=element.data("disabled")),ObjectUtils.isEmpty(attrs.elid)&&(attrs.elid=doProp),ObjectUtils.isEmpty(attrs.name)&&(attrs.name=doProp),ObjectUtils.isEmpty(attrs.errLabel)&&(attrs.errLabel=doProp),ObjectUtils.isEmpty(attrs.disabled)&&(attrs.disabled=""),ObjectUtils.isEmpty(attrs.placeholder)&&(attrs.placeholder=""),ObjectUtils.isEmpty(attrs.showrange)&&(attrs.showrange=!0),ObjectUtils.isEmpty(attrs.btnclick)&&(attrs.btnclick=""),ObjectUtils.isEmpty(attrs.uniqueNamesList)&&(attrs.uniqueNamesList="");var labelInfo="";ObjectUtils.isEmpty(attrs.labelInfo)||(labelInfo=AttUtilsService.stringArgsFormat('<att-info-tip info-text="{0}"></att-info-tip>',[attrs.labelInfo]));var tailLabel=null,displayLabel=null;null==attrs.label&&(attrs.label="gen.ui_names."+doParent+"_"+doProp),null!=attrs.taillabel&&(tailLabel=locale.getString(attrs.taillabel));var label_str=locale.getString(attrs.label);displayLabel=uiType!==UIComponentTypes.CHECKBOX&&uiType!==UIComponentTypes.LABEL?label_str+":":label_str;var events="";attrs.ngChange&&(events+='ng-change="'+attrs.ngChange+'"',element.removeAttr("ng-change"));var layouts=[];switch(attrs.uilayouts&&(layouts=attrs.uilayouts.split(" && ")),uiType){case UIComponentTypes.TEXT:var uniqueName="";attrs.uniqueNamesList&&(uniqueName=AttUtilsService.stringArgsFormat('unique-names-list="{0}" unique-prop="{1}" is-bound="false"',[attrs.uniqueNamesList,attrs.name])),template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label class="control-label">{1}{8}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-text-input ng-model="{0}" input-id="{2}" input-type="text" name="{3}" errLabel="{4}" ng-disabled="{5}" placeholder="{6}" {7}{9} class="form-control"></att-text-input>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.placeholder,events,labelInfo,uniqueName]);break;case UIComponentTypes.TEXTAREA:var inputType="text";attrs.encrypted_using&&(inputType="password"),template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label class="control-label">{1}{8}</label>\n            </div>\n            <div class="formWrapContent">\n                <textarea ng-model="{0}" input-id="{2}" input-type="{9}" name="{3}" errLabel="{4}" ng-disabled="{5}" placeholder="{6}" {7} class="form-control"></textarea>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.placeholder,events,labelInfo,inputType]);break;case UIComponentTypes.CHECKBOX:template='<att-checkbox ng-model="{0}" label="{1}" input-id="{2}" input-name="{3}" data-disabled="{4}" {5}></att-checkbox>{6}',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.disabled,events,labelInfo]);break;case UIComponentTypes.NUMBER:var showMaxMinLabel=!1,showTailLabel=""!=tailLabel&&null!=tailLabel,number_stepper_events="";attrs.ngChange&&(number_stepper_events+='after-change="'+attrs.ngChange+'"',element.removeAttr("ng-change")),ObjectUtils.isEmpty(attrs.min)&&(attrs.min=null!=messageValidation&&messageValidation.min?messageValidation.min:"0"),ObjectUtils.isEmpty(attrs.max)&&(attrs.max=null!=messageValidation&&messageValidation.max?messageValidation.max:""),showMaxMinLabel=""!=attrs.min&&""!=attrs.max&&attrs.showrange,template='<div class="form-row row">\n            <div class="formWrapLabel">\n                <label class="control-label" >{1}{9}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-number-stepper number-data="{0}" min="{2}" max="{3}" step="1" ng-disabled="{4}"  css-class="numericStepper" {8}></att-number-stepper>\n                <span ng-if="{5}" class="infoSpan" style="padding-top: 5px;float: left;padding-left: 6px;font-size:11px;">({{{2} | number}} - {{{3} | number}})</span>\n                <span ng-if="{6}" style="padding-top: 5px;float: left;padding-left: 6px;font-size:11px;">{7}</span>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.min,attrs.max,attrs.disabled,showMaxMinLabel,showTailLabel,tailLabel,number_stepper_events,labelInfo]);break;case UIComponentTypes.NUMBER_WITHOUT_LABLE:var showMaxMinLabel=!1,showTailLabel=""!=tailLabel&&null!=tailLabel,number_stepper_events="";attrs.ngChange&&(number_stepper_events+='after-change="'+attrs.ngChange+'"',element.removeAttr("ng-change")),ObjectUtils.isEmpty(attrs.min)&&(attrs.min=null!=messageValidation&&messageValidation.min?messageValidation.min:"0"),ObjectUtils.isEmpty(attrs.max)&&(attrs.max=null!=messageValidation&&messageValidation.max?messageValidation.max:""),showMaxMinLabel=""!=attrs.min&&""!=attrs.max&&attrs.showrange,template='<div class="formWrapContent">\n                <att-number-stepper number-data="{0}" min="{2}" max="{3}" step="1" ng-disabled="{4}"  css-class="numericStepper" {8}></att-number-stepper>\n                <span ng-if="{5}" class="infoSpan" style="padding-top: 11px;float: left;padding-left: 6px;font-size:11px;">({{{2} | number}} - {{{3} | number}})</span>\n                <span ng-if="{6}" style="padding-top: 11px;float: left;padding-left: 6px;font-size:11px;">{7}</span>\n            </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.min,attrs.max,attrs.disabled,showMaxMinLabel,showTailLabel,tailLabel,number_stepper_events,labelInfo]);break;case UIComponentTypes.TEXT_NUMBER:template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label for="{2}" class="control-label">{1}{8}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-text-input ng-model="{0}" input-id="{2}" name="{3}" errLabel="{4}" ng-disabled="{5}" placeholder="{6}" {7}  class="form-control"></att-text-input>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.placeholder,events,labelInfo]);break;case UIComponentTypes.TEXT_BROWSE:attrs.elid===doProp&&(attrs.elid="BrowseInput"),template='<div class="form-row row">\n    <div class="formWrapLabel">\n        <label for="{2}" class="control-label">{1}{9}</label>\n    </div>\n    <div class="formWrapContent">\n        <div class="BrowseContainer">\n            <att-text-input ng-model="{0}" name="{3}" class="{2} form-control" errLabel="{4}" ng-disabled="{5}" {8} ng-trim="false"  placeholder="{7}"></att-text-input>\n            <att-button class="BrowseButton" label="common.base.Browse" button-class="modal-attBtn"  on-click="{6}" ng-disabled="{5}" ></att-button>\n        </div>\n    </div>\n</div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.btnclick,attrs.placeholder,events,labelInfo]);break;case UIComponentTypes.PASSWORD:template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label class="control-label">{1}{7}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-text-input ng-model="{0}" input-id="{2}" input-type="password" name="{3}" errLabel="{4}" ng-disabled="{5}" {8} placeholder="{6}" class="form-control"></att-text-input>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.placeholder,labelInfo,events]);break;case UIComponentTypes.SELECT:var select_events="";attrs.onItemSelected&&(select_events+='on-item-selected="'+attrs.onItemSelected+'"',element.removeAttr("on-item-selected"));var prop="name",dataProp="type";template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label style="padding-top: 4px;" class="control-label">{0}{8}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-select-list model="{1}" source-array="{2}" prop="{3}" dataprop="{4}" item-tool-tip-prop="{5}" ng-disabled="{6}" {7}  allow-search="false"  ></att-select-list>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[displayLabel,pathModel,attrs.sourceArray,prop,dataProp,prop,attrs.disabled,select_events,labelInfo]);break;case UIComponentTypes.BINARY:var binaryFileIdId=AttUtilsService.stringArgsFormat("binaryFld_{0}",[attrs.name]);template='<div class="form-row row">\n            <div class="formWrapLabel">\n                <label class="control-label">{1}{8}</label>\n            </div>\n            <div class="formWrapContent">\n               <input file-dialog type="file" id="{9}" accept=".*" style="display: none">\n               <att-button label="Load" button-class="BrowseButton attBtn modal-attBtn" on-click="onLoadBinaryFieldClicked(\'{3}\', \'{9}\')"></att-button>\n               <att-button style=\'margin-left: 20px;\' label="Delete" button-class="BrowseButton attBtn modal-attBtn" on-click="onDeleteBinaryFieldClicked(\'{3}\')"></att-button>\n               <div>\n                   <label style="margin-left: 20px;line-height: 32px;" class="control-label">{{{0} ? "Loaded" : "Not Loaded"}}</label>\n                   <att-loader ng-if="{10}" loader-type="ball-clip-rotate-multiple"></att-loader>\n               </div>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,displayLabel,attrs.elid,attrs.name,attrs.errLabel,attrs.disabled,attrs.placeholder,events,labelInfo,binaryFileIdId,binaryFileIdId+"_Loading"]);break;case UIComponentTypes.RADIO:var verticalAlign=layouts.length>0&&(layouts.indexOf(UILayoutTypes.VERTICAL)>-1||layouts.indexOf(UILayoutTypes.VERTICAL_INDENT)>-1),verticalIndent=layouts.length>0&&layouts.indexOf(UILayoutTypes.VERTICAL_INDENT)>-1;template="<div style='margin-bottom: 0' class=\"form-row row\">\n            <div class=\"formWrapLabel\" ng-style=\"{'width': {6} || !{5} ? '' : '100%', 'margin-bottom': {6} || !{5} ? '6px' : '4px'}\">\n                <label style=\"padding-top: 2px;\" class=\"control-label\">{0}{1}</label>\n            </div>\n            <div class=\"formWrapContent\" ng-style=\"{'width': {5} && !{6} ? '100%' : ''}\">\n               <att-radio-button-group model='{2}' source-array='{3}' disabled='{4}' vertical-aligned={5} vertical-indent={6}></att-radio-button-group>\n            </div>\n        </div>",template=AttUtilsService.stringArgsFormat(template,[displayLabel,labelInfo,pathModel,attrs.sourceArray,attrs.disabled,verticalAlign,verticalIndent]);break;case UIComponentTypes.SELECT_WRAPPER:template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label style="padding-top: 4px;" class="control-label">{0}{4}</label>\n            </div>\n            <div class="formWrapContent">\n                <att-select-wrapper model="{1}" source-array="{2}" prop="name" dataprop="value" item-tool-tip-prop="name" ng-disabled="{3}" allow-search="true" ></att-select-wrapper>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[displayLabel,pathModel,attrs.sourceArray,attrs.disabled,labelInfo]);break;case UIComponentTypes.LABEL:var labelStyle="";layouts.length>0&&layouts.indexOf(UILayoutTypes.BOLD)>-1&&(labelStyle="font-weight: bold;  color: #707070"),template='<div class="form-row row" >\n            <div class="formWrapLabel">\n                <label class="control-label" style="{1}">{0}</label>\n            </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[displayLabel,labelStyle]);break;case UIComponentTypes.DOWNLOAD_CONTAINER:template='<div class="form-row row" >\n               <div class="formWrapLabel">\n                   <label style="padding-top: 4px;" class="control-label">{0}{4}</label>\n               </div>\n               <div class="formWrapContent">\n                    <div class="BrowseContainer" style="padding-right: 4px;float: left;">\n                        <att-button  i18n="{1}" button-class="BrowseButton attBtn modal-attBtn" on-click="onDownload(\'{2}\')"ng-disabled="{3}"></att-button>\n                    </div>\n               </div>\n       </div>',template=AttUtilsService.stringArgsFormat(template,[displayLabel,attrs.label,attrs.container_type,attrs.disabled,labelInfo]);break;case UIComponentTypes.UPLOAD_CONTAINER:template='<div class="form-row row" >\n               <div class="formWrapLabel">\n                   <label style="padding-top: 4px;" class="control-label">{0}{1}</label>\n               </div>\n               <div class="formWrapContent">\n                   <div class="BrowseContainer" style="padding-right: 4px;float: left;">\n                         <input type="file" file-model="data.{6}" id="{7}" accept="{2}" style="display: none;">\n                        <att-button  i18n="{3}" button-class="BrowseButton attBtn modal-attBtn" on-click="onUpload(\'{6}\',\'{4}\')"ng-disabled="{5}"></att-button>\n                   </div>\n               </div>\n        </div>',template=AttUtilsService.stringArgsFormat(template,[displayLabel,labelInfo,attrs.upload_type,attrs.label,attrs.container_type,attrs.disabled,attrs.name,attrs.name+"Browse"]);break;case UIComponentTypes.SLIDER_NUMBER:var showLabel=-1==displayLabel.indexOf("empty_string_value");template='<div class="form-row row" ng-if="{6}">\n           <label style="padding-top: 4px;" class="control-label">{3}{4}</label>\n            </div>\n       <div class="form-row row" >\n            <att-slider-number-wrapper ng-model="{0}" min-value="{1}" max-value="{2}" ng-disabled="{5}">\n       </div>',template=AttUtilsService.stringArgsFormat(template,[pathModel,attrs.min,attrs.max,displayLabel,labelInfo,attrs.disabled,showLabel]);break;case UIComponentTypes.ERROR:template='<div class="form-row row" >\n                <span class="rColor">{0}</span>\n           </div>',template=AttUtilsService.stringArgsFormat(template,[attrs.error_msg])}return template},VersionPolicyService.prototype.base64ArrayBuffer=function(arrayBuffer){for(var a,b,c,d,chunk,base64="",encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bytes=new Uint8Array(arrayBuffer),byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=0;mainLength>i;i+=3)chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],a=(16515072&chunk)>>18,b=(258048&chunk)>>12,c=(4032&chunk)>>6,d=63&chunk,base64+=encodings[a]+encodings[b]+encodings[c]+encodings[d];return 1===byteRemainder?(chunk=bytes[mainLength],a=(252&chunk)>>2,b=(3&chunk)<<4,base64+=encodings[a]+encodings[b]+"=="):2===byteRemainder&&(chunk=bytes[mainLength]<<8|bytes[mainLength+1],a=(64512&chunk)>>10,b=(1008&chunk)>>4,c=(15&chunk)<<2,base64+=encodings[a]+encodings[b]+encodings[c]+"="),base64},VersionPolicyService.prototype.replaceVariablesInTemplate=function(template,variables){for(var i=0;i<variables.length;i++)template=template.replaceAll("${"+variables[i].name+"}",variables[i].value);return template},VersionPolicyService.prototype.sortItemsByDisplayOrder=function(items){items.sort(function(a,b){return a.display_order>b.display_order?-1:a.display_order<b.display_order?1:0})},VersionPolicyService.prototype.addItemsToContent=function(scope,items,content,level){for(var iItem=0;iItem<items.length;iItem++){var item=items[iItem];level&&level!==item.level||(content+=that.getFieldElement(scope,item))}return content},VersionPolicyService.prototype.getGroupElement=function(groupIndex,group,scope,level,versionValidCallback){var groupContent="",itemsWithGroupAndOrder=ArrayUtils.filter(scope.ctx.items,function(it){return it.group===group.name&&it.display_order>0});itemsWithGroupAndOrder&&(that.sortItemsByDisplayOrder(itemsWithGroupAndOrder),groupContent=that.addItemsToContent(scope,itemsWithGroupAndOrder,groupContent,level));var itemsWithGroup=ArrayUtils.filter(scope.ctx.items,function(it){return it.group===group.name&&0===it.display_order});if(itemsWithGroup&&(groupContent=that.addItemsToContent(scope,itemsWithGroup,groupContent,level)),!groupContent)return null;var groupDesc="";group.description&&(groupDesc='<span style="line-height: 30px;" >'+group.description+"</span>");var groupTemplate='<div uib-accordion-group heading="${groupName}" ng-if="${visible}" class="accordionGroup" ng-init="isOpen${groupIndex} = ${isFirstGroup}" is-open="isOpen${groupIndex}" isGroupOpened="{{isOpen${groupIndex}}}"><br>${groupDesc}${groupContent}</div>',groupVars=[];groupVars.push({name:"groupName",value:group.ui_name?group.ui_name:group.name}),groupVars.push({name:"groupContent",value:groupContent}),groupVars.push({name:"groupDesc",value:groupDesc}),groupVars.push({name:"groupIndex",value:groupIndex}),groupVars.push({name:"isFirstGroup",value:0===groupIndex?"true":"false"});var VisibleExp=!0,VisibleVersion=!0,Visible=!0;return group.visible_exp&&(VisibleExp=group.visible_exp),null!=group.version&&(VisibleVersion=versionValidCallback(group.version)),Visible=VisibleVersion?VisibleExp:!1,groupVars.push({name:"visible",value:Visible.toString()}),that.replaceVariablesInTemplate(groupTemplate,groupVars)},VersionPolicyService.prototype.getFieldElement=function(scope,item){var repeatedFieldTemplate='<att-field autoform="true" parent_prop="${parent_prop}" prop="${prop}" min="${min}" class="${class}" max="${max}" uitype="${ui-type}" uilayouts="${ui-layouts}" label="${label}" source-array="${sourceArray}" ng-if="${visible}" disabled="${disabled}" placeholder="${placeholder}" container_type="${container_type}"  upload_type="${upload_type}" encrypted_using="${encrypted_using}" btnclick="${btnclick}" label-info="${labelInfo}" error_msg="${error_msg}" taillabel="${taillabel}" feature-flag feature-flag-name="${featureFlagName}" feature-flag-levels="endpoint,server" feature-flag-endpoint="${endpointName}" accept-empty-name="true"></att-field>',propVariables=[];propVariables.push({name:"parent_prop",value:scope.model.$type?"DO."+scope.model.$type:null}),propVariables.push({name:"prop",value:item.name}),propVariables.push(item.style_class?{name:"class",value:item.style_class}:{name:"class",value:""}),propVariables.push(item.error_msg?{name:"error_msg",value:item.error_msg}:{name:"error_msg",value:""}),propVariables.push(item.min_value?{name:"min",value:item.min_value}:{name:"min",value:0}),propVariables.push(item.max_value?{name:"max",value:item.max_value}:{name:"max",value:0}),propVariables.push(item.unit?{name:"taillabel",value:item.unit}:{name:"taillabel",value:""}),item.ui_layouts&&propVariables.push({name:"ui-layouts",value:item.ui_layouts});var uiName="";uiName=ObjectUtils.isEmpty(item.ui_name)?Utils.capitalizeFirstLowerOthers(item.name):item.ui_name;var selectSubTitle="";item.select_sub_title&&(selectSubTitle=item.select_sub_title);var selectTitle="Select "+uiName.replace(" name","");item.select_title&&(selectTitle=item.select_title),propVariables.push({name:"label",value:uiName});var uiType=UIComponentTypes.TEXT,sourceArray=[],sourceArrayName="";switch(item.type){case RceConnectionInfoItemType.STRING:if(item.encrypted_using)propVariables.push({name:"encrypted_using",value:item.encrypted_using}),uiType=item.ui_type&&item.ui_type!=UIComponentTypes.NONE?item.ui_type:UIComponentTypes.PASSWORD;else{if(propVariables.push({name:"encrypted_using",value:""}),item.browse&&item.browse!=RceConnectionInfoItemBrowseType.NONE)if(item.browse===RceConnectionInfoItemBrowseType.LIST){uiType=UIComponentTypes.TEXT_BROWSE;var getDatabaseValuesCall=AttUtilsService.stringArgsFormat("onBrowseListBtnClicked('{0}','{1}','{2}','{3}')",[item.name,uiName,selectTitle,selectSubTitle]);propVariables.push({name:"btnclick",value:getDatabaseValuesCall})}else if(item.browse===RceConnectionInfoItemBrowseType.FILE_SYSTEM){uiType=UIComponentTypes.TEXT_BROWSE;var getDatabaseValuesCall_1="";getDatabaseValuesCall_1=item.browse_folder_root?AttUtilsService.stringArgsFormat("onBrowseFileSystemBtnClicked('{0}',true,'{1}')",[item.browse_folder_root,item.name]):AttUtilsService.stringArgsFormat("onBrowseFileSystemBtnClicked('{0}',true, '{1}')",["",item.name]),propVariables.push({name:"btnclick",value:getDatabaseValuesCall_1})}else if(item.browse===browse_type.DATABASE){uiType=UIComponentTypes.TEXT_BROWSE;var getDatabaseValuesCall=AttUtilsService.stringArgsFormat("onBrowseDatabasesNamesClicked(false,'{0}')",[item.name]);propVariables.push({name:"btnclick",value:getDatabaseValuesCall})}else item.browse===browse_type.TIME_ZONE&&(uiType=UIComponentTypes.SELECT_WRAPPER,sourceArrayName="TimeZoneList",scope[sourceArrayName]=scope.callbacks.onTimeZoneList());item.ui_type===UIComponentTypes.DOWNLOAD_CONTAINER?uiType=UIComponentTypes.DOWNLOAD_CONTAINER:item.ui_type===UIComponentTypes.UPLOAD_CONTAINER?uiType=UIComponentTypes.UPLOAD_CONTAINER:item.ui_type===UIComponentTypes.LABEL?uiType=UIComponentTypes.LABEL:item.ui_type===UIComponentTypes.TEXTAREA?uiType=UIComponentTypes.TEXTAREA:item.ui_type===UIComponentTypes.ERROR&&(uiType=UIComponentTypes.ERROR)}break;case RceConnectionInfoItemType.NUMBER:uiType=item.ui_type===UIComponentTypes.NUMBER_WITHOUT_LABLE?UIComponentTypes.NUMBER_WITHOUT_LABLE:item.ui_type===UIComponentTypes.SLIDER_NUMBER?UIComponentTypes.SLIDER_NUMBER:UIComponentTypes.NUMBER;break;case RceConnectionInfoItemType.BOOL:uiType=UIComponentTypes.CHECKBOX;break;case RceConnectionInfoItemType.ENUM:uiType=UIComponentTypes.SELECT,item.ui_type===UIComponentTypes.RADIO&&(uiType=UIComponentTypes.RADIO),ArrayUtils.each(item.values,function(it){it.version&&!that.isCurrentVersionMinimum(it.version)&&(it.visible_exp=!1),sourceArray.push({type:it.name,name:it.ui_name?it.ui_name:it.name,value:it.value,isVisible:it.visible_exp,featureFlagName:it.feature_flag,featureFlagLevels:"endpoint,server",featureFlagEndpoint:scope.name})}),sourceArrayName=item.name+"EnumTypes",scope[sourceArrayName]=sourceArray;break;case RceConnectionInfoItemType.BINARY:uiType=UIComponentTypes.BINARY}propVariables.push({name:"sourceArray",value:sourceArrayName}),propVariables.push({name:"ui-type",value:uiType}),propVariables.push(ObjectUtils.isEmpty(item.info)?{name:"labelInfo",value:""}:{name:"labelInfo",value:item.info});
var disabled="false",visible="true";item.disabled_exp&&(disabled=item.disabled_exp),item.visible_exp&&(visible=item.visible_exp),propVariables.push({name:"disabled",value:disabled}),propVariables.push({name:"visible",value:visible}),propVariables.push({name:"featureFlagName",value:item.feature_flag||""}),propVariables.push({name:"endpointName",value:scope.name});var placeholder="";item.placeholder&&(placeholder=item.placeholder),propVariables.push({name:"placeholder",value:placeholder});var containerType="";item.container_type&&(containerType=item.container_type),propVariables.push({name:"container_type",value:containerType});var uploadType="";return item.upload_type&&(uploadType=item.upload_type),propVariables.push({name:"upload_type",value:uploadType}),that.replaceVariablesInTemplate(repeatedFieldTemplate,propVariables)},VersionPolicyService}();versionPolicyModule.directive("versionPolicy",["VersionPolicyService",function(VersionPolicyService){function onReject(element,policy){policy===VersionPolicyService.Const.EnableDisable?(element.addClass("disabled"),element.prop("disabled",!0),setTimeout(function(){element.find("input, textarea").attr("tabindex",-1)})):element.hide()}function onAccept(element,policy){policy===VersionPolicyService.Const.EnableDisable?(element.removeClass("disabled"),element.prop("disabled",!1),element.find("input, textarea").removeAttr("tabindex")):element.show()}return{restrict:"A",scope:!1,link:function(scope,element,attrs){var policy=attrs.policy,doParent=null,doProp=null;if(!ObjectUtils.isEmpty(attrs.prop)){var parts=attrs.prop.split(".");doParent=parts[1],doProp=parts[2]}ObjectUtils.isEmpty(doParent)||ObjectUtils.isEmpty(doProp)?ObjectUtils.isEmpty(attrs.only)?ObjectUtils.isEmpty(attrs.minimum)?ObjectUtils.isEmpty(attrs.maximum)||(VersionPolicyService.isMajorVersionEqualsToCurrent(attrs.maximum)||VersionPolicyService.isCurrentVersionMaximumAndEqual(attrs.maximum)?onAccept(element,policy):onReject(element,policy)):VersionPolicyService.isCurrentVersionMinimum(attrs.minimum)?onAccept(element,policy):onReject(element,policy):VersionPolicyService.isMajorVersionEqualsToCurrent(attrs.only)?onAccept(element,policy):onReject(element,policy):VersionPolicyService.isFieldSupprtedIncurrentVersion(doParent,doProp)?onAccept(element,policy):onReject(element,policy)}}}]),versionPolicyModule.directive("attField",["VersionPolicyService",function(VersionPolicyService){return{restrict:"E",scope:!1,template:function(element,attrs){return"true"!=attrs[VersionPolicyService.Const.COMPILED]?VersionPolicyService.elemTemplate(element,attrs):element[0].innerHTML}}}]),versionPolicyModule.directive("attFieldGroup",["$compile","VersionPolicyService","$timeout",function($compile,VersionPolicyService,$timeout){return{restrict:"A",scope:{ctxFunc:"&ctx",callbacksFunc:"&callbacks",model:"=",name:"="},compile:function(el,attrs){var variables=[];variables.push({name:"form_name",value:attrs.form}),variables.push({name:"validationObj",value:"validationPlaceHolder"}),variables.push({name:"model",value:"model"});var level=attrs.level;return function(scope,elem){scope.validationPlaceHolder={},scope.ctx=scope.ctxFunc(),scope.callbacks=scope.callbacksFunc(),scope.callbacks&&(scope.$watch("model",function(){scope.callbacks.onChanged&&scope.callbacks.onChanged()},!0),scope.onBrowseListBtnClicked=function(itemName,itemUIName,selectTitle,selectSubTitle){scope.callbacks.onBrowseList&&scope.callbacks.onBrowseList(itemName,itemUIName,selectTitle,selectSubTitle)},scope.onBrowseFileSystemBtnClicked=function(rootFolderName,concatenate_path,folderName){scope.callbacks.onBrowseFileSystem&&scope.callbacks.onBrowseFileSystem(rootFolderName,concatenate_path,folderName)},scope.onBrowseDatabasesNamesClicked=function(i,itemName){scope.callbacks.onBrowseDatabase&&scope.callbacks.onBrowseDatabase(!1,itemName)},scope.isOs=function(os_type){return scope.callbacks.isOsSystem?scope.callbacks.isOsSystem(os_type):void 0},scope.onTimeZoneList=function(){scope.callbacks.onTimeZoneList&&scope.callbacks.onTimeZoneList()},scope.data={},scope.onUpload=function(id,container_type){return scope.callbacks.onUpload?(scope.data[id]=null,scope.callbacks.onUpload(id,container_type)):void 0},scope.onDownload=function(container_type){return scope.callbacks.onDownload?scope.callbacks.onDownload(container_type):void 0},scope.onDeleteBinaryFieldClicked=function(itemName){scope.model[itemName]=null},scope.onLoadBinaryFieldClicked=function(itemName,itemElemId){angular.element("#"+itemElemId).val(""),scope.itemName=itemName,$timeout(function(){angular.element("#"+itemElemId).trigger("click")},100)},scope.$on("fileAdded",function(evt,file){var binaryFileIdIdLoading=AttUtilsService.stringArgsFormat("binaryFld_{0}_Loading",[scope.itemName]);if(scope.$evalAsync(function(){scope[binaryFileIdIdLoading]=!0}),file&&file.name){if(file.size>10485760)return scope.model[scope.itemName]=null,scope[binaryFileIdIdLoading]=!1,void alert("Too big file!");var reader=new FileReader;reader.onload=function(evt){scope.model[scope.itemName]=VersionPolicyService.base64ArrayBuffer(evt.target.result),scope.$evalAsync(function(){scope[binaryFileIdIdLoading]=!1})},reader.readAsArrayBuffer(file)}})),elem.removeAttr("att-field-group");var template='<form class="H100W100 form-horizontal" name="${form_name}" form-validation="${validationObj}"  model-to-validate="${model}">${formContent}</form>',formContent="";if(!scope.ctx)return void $compile(elem)(scope);var itemsWithOrder=ArrayUtils.filter(scope.ctx.items,function(it){return(null==it.group||""==it.group)&&it.display_order>0});if(null!=itemsWithOrder&&(VersionPolicyService.sortItemsByDisplayOrder(itemsWithOrder),formContent=VersionPolicyService.addItemsToContent(scope,itemsWithOrder,formContent,level)),scope.ctx.groups&&scope.ctx.groups.length>0){formContent+='<uib-accordion close-others="false" class="plusMinusAccordion" >';for(var iGroup=0;iGroup<scope.ctx.groups.length;iGroup++){var group=scope.ctx.groups[iGroup],groupElement=VersionPolicyService.getGroupElement(iGroup,group,scope,level,VersionPolicyService.isCurrentVersionMinimum);null!=groupElement&&(formContent+=groupElement)}formContent+="</uib-accordion>"}var itemsWithoutGroup=ArrayUtils.filter(scope.ctx.items,function(it){return(null==it.group||""==it.group)&&0==it.display_order});formContent=VersionPolicyService.addItemsToContent(scope,itemsWithoutGroup,formContent,level),variables.push({name:"formContent",value:formContent}),template=VersionPolicyService.replaceVariablesInTemplate(template,variables),elem.append(template),$compile(elem)(scope)}}}}])}()}();