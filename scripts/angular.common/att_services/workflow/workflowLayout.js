!function(global){"use strict";global.WorkFlow=global.WorkFlow||{},global.WorkFlow.layouts={},global.WorkFlow.layouts.workflowLayout=function(params){var options={nodeSep:params.nodeSep,edgeSep:params.edgeSep,rankSep:params.rankSep,rankDir:params.rankDir,multigraph:!0};return this.graphObj=null,this.run=function(nodes_d,edges_d){this.graphObj=new dagreD3.dagre.graphlib.Graph,this.graphObj.setGraph(options),this.graphObj.setDefaultEdgeLabel(function(){return{}});for(var i=0;i<nodes_d.length;i++){var node=nodes_d[i];this.graphObj.setNode(node.id,node)}for(var i=0;i<edges_d.length;i++){var edge=edges_d[i];this.graphObj.setEdge(edge.source.id,edge.target.id)}dagreD3.dagre.layout(this.graphObj)},this.getEdgePath=function(edge,edgeEl){var pointTarget=AttuGraph.Utils.point(edge.target),pointSource=AttuGraph.Utils.point(edge.source),edgePath="";return"ErrorOutPort"==edge.type&&AttuGraph.Utils.svgAddClass(edgeEl,"Error"),"LR"==params.rankDir?"ErrorOutPort"==edge.type?(AttuGraph.Utils.svgAddClass(edgeEl,"Error"),pointSource.x=pointSource.x+edge.source.bbox.width/2,pointSource.y=pointSource.y+edge.source.bbox.height,pointTarget.x=pointTarget.x,pointTarget.y=pointTarget.y+edge.target.bbox.height/2,edgePath=WorkFlow.shapes.getErrorPath(pointSource.x,pointSource.y,pointTarget.x,pointTarget.y)):(pointSource.x=pointSource.x+edge.source.bbox.width,pointSource.y=pointSource.y+edge.source.bbox.height/2,pointTarget.x=pointTarget.x,pointTarget.y=pointTarget.y+edge.target.bbox.height/2,edgePath=WorkFlow.shapes.getArrowWithHeadPath(pointSource.x,pointSource.y,pointTarget.x,pointTarget.y)):"RL"==params.rankDir||"TB"==params.rankDir||"BT"==params.rankDir,global.WorkFlow.Monitor.updateEdge(edge,edgeEl),edgePath},this},global.WorkFlow.layouts.workflowLayout1=function(params){this.run=function(){},this.getEdgePath=function(edge,edgeEl){var pointTarget=AttuGraph.Utils.point(edge.target),pointSource=AttuGraph.Utils.point(edge.source);return"ErrorOutPort"==edge.type?(AttuGraph.Utils.svgAddClass(edgeEl,"Error"),pointSource.x=pointSource.x+edge.source.bbox.width/2,pointSource.y=pointSource.y+edge.source.bbox.height,pointTarget.x=pointTarget.x+edge.target.bbox.width/2,pointTarget.y=pointTarget.y,WorkFlow.shapes.getLinkPathDirectWithMovingArrow(pointSource.x,pointSource.y,pointTarget.x,pointTarget.y)):("LR"==params.rankDir?(pointSource.x=pointSource.x+edge.source.bbox.width,pointSource.y=pointSource.y+edge.source.bbox.height/2,pointTarget.x=pointTarget.x,pointTarget.y=pointTarget.y+edge.target.bbox.height/2):"RL"==params.rankDir||"TB"==params.rankDir||"BT"==params.rankDir,WorkFlow.shapes.getArrowWithHeadPath(pointSource.x,pointSource.y,pointTarget.x,pointTarget.y))}}}(this);