!function(global){"use strict";global.WorkFlow=global.WorkFlow||{},global.WorkFlow.Monitor={},global.WorkFlow.Monitor.updateNode=function(nodeData,nodeEl){if(null!=nodeData.monitoringData&&null!=nodeEl){var percent=0,shouldChangeColor=null;(nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.FAILED||nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.ABORTED)&&(percent=100,shouldChangeColor="#F7C2C2"),nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.FAILED&&(d3.select(nodeEl).selectAll(".State").remove(),d3.select(nodeEl).append("image").attr("class","State ErrorState").attr("xlink:href","images/common/workflow/ErrorState.svg").attr("x",nodeData.bbox.width-8+"px").attr("y","-8").attr("height","16px").attr("width","16px"),nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.message]?global.AttuGraph.Utils.setToolTipToNode(nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.message],nodeEl):global.AttuGraph.Utils.setToolTipToNode(nodeData.tooltip,nodeEl)),(nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.COMPLETED||nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.RUNNING)&&(percent=nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.progress_percentage],shouldChangeColor="#a3eef1"),nodeData.monitoringData[DO.FlowNodeStatus.status][DO.ExecutorStatus.state]==DO.ExecutionState.UNKNOWN&&(shouldChangeColor="#ffffff",percent=0),null!=nodeEl&&d3.select(nodeEl).select(".Progress").transition().attr("offset",percent+"%").duration(400),shouldChangeColor&&d3.select(nodeEl).select(".Progress").style("stop-color",shouldChangeColor)}},global.WorkFlow.Monitor.updateEdge=function(edgeData,edgeEl){null!=edgeData.monitoringData&&AttuGraph.Utils.svgAddClass(edgeEl,"EdgeState_"+edgeData.monitoringData.state)}}(this);