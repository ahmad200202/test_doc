var Selectable=function(){var select=function(selection){var lastSelected=null;selection.on("click",function(d){var node=d3.select(this),selected=!node.classed("selected");d3.event.ctrlKey&&d3.event.shiftKey?selected?(lastSelected=lastSelected||d,getrange.call(this,d,lastSelected).classed("selected",!0)):(node.classed("selected",selected),lastSelected=lastSelected==d?null:lastSelected):d3.event.ctrlKey?(node.classed("selected",selected),selected?lastSelected=d:lastSelected==d&&(lastSelected=null)):d3.event.shiftKey?(selection.classed("selected",!1),lastSelected=lastSelected||d,getrange.call(this,d,lastSelected).classed("selected",!0)):1==selection.filter(".selected")[0].length?(selection.classed("selected",!1),node.classed("selected",selected),lastSelected=selected?d:null):(selection.classed("selected",!1),node.classed("selected",!0),lastSelected=d),onSelect()});d3.select("body").on("keyup",function(){if(d3.event.ctrlKey&&65==d3.event.keyCode){var allSelected=selection.filter(function(){return!d3.select(this).classed("selected")}).empty();selection.classed("selected",!allSelected),onSelect()}})},getrange=function(a,b){return[a,b]},onSelect=function(){};return select.getrange=function(_){return 0==arguments.length?getrange:(getrange=_,select)},select.on=function(event,_){return"select"==event?null==_?onSelect:(onSelect=_,select):void 0},select};