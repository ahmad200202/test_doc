!function(angular){"use strict";function toArray(object){return ObjectUtils.isKind(object,"Array")?object:Object.keys(object).map(function(key){return object[key]})}angular.module("attCommon.commonFilters",[]);angular.module("attCommon.commonFilters").filter("bytesFormat",function(){return function(bytes,format,hideLessThanOne){var returnVal=0;return _.isNumber(bytes)?(returnVal=bytes/1024,"MB"===format&&(returnVal/=1024),angular.isDefined(hideLessThanOne)&&hideLessThanOne&&1>returnVal?"< 1":returnVal=Math.floor(returnVal)):bytes}}),angular.module("attCommon.commonFilters").filter("sumOfArray",["$filter",function($filter){return function(data,key){if(null==data||"undefined"==typeof data||"undefined"==typeof key)return 0;for(var sum=0,i=0;i<data.length;i++)sum+=data[i][key];return $filter("number")(sum,0)}}]),angular.module("attCommon.commonFilters").filter("objectSort",function(){return function(obj){return null==obj?{}:ObjectUtils.sortObject(obj)}}),angular.module("attCommon.commonFilters").filter("millisecondsFormat",function(){return function(milliseconds,format,padding,hideDateForSameDate){var seconds,minutes,hours,day,month,year;if("-"===milliseconds)return milliseconds;if(!_.isNumber(milliseconds)||isNaN(milliseconds)||milliseconds%1!=0)return"";var totalSeconds=Math.floor(milliseconds/1e3*1)/1;if(("hh:mm:ss"==format.toLowerCase()||"dd/mm/yyyy hh:mm:ss"==format.toLowerCase())&&(seconds=Math.round(totalSeconds%60*1)/1,minutes=Math.floor(totalSeconds/60%60),hours=Math.floor(totalSeconds/3600%60),!_.isUndefined(padding)&&padding)){var paddingStr=Array(3).join("0");seconds=(paddingStr+seconds).slice(-2),minutes=(paddingStr+minutes).slice(-2),hours=(paddingStr+hours).slice(-2)}if("hh:mm:ss"==format.toLowerCase())return hours+":"+minutes+":"+seconds;if("dd/mm/yyyy hh:mm:ss"==format.toLowerCase()){var dateMS=new Date(milliseconds);seconds=dateMS.getSeconds(),minutes=dateMS.getMinutes(),hours=dateMS.getHours();var dateStr="",currentDate=new Date;if(day=dateMS.getDate(),month=dateMS.getMonth()+1,year=dateMS.getFullYear(),!_.isUndefined(padding)&&padding){var paddingStr=Array(3).join("0");seconds=(paddingStr+seconds).slice(-2),minutes=(paddingStr+minutes).slice(-2),hours=(paddingStr+hours).slice(-2),day=(paddingStr+day).slice(-2),month=(paddingStr+month).slice(-2)}dateStr=day+"/"+month+"/"+year+" ";var dateIsToday=day==currentDate.getDate()&&month==currentDate.getMonth()+1&&year==currentDate.getFullYear();return dateIsToday&&!_.isUndefined(hideDateForSameDate)&&1==hideDateForSameDate&&(dateStr=""),dateStr+hours+":"+minutes+":"+seconds}}}),angular.module("attCommon.commonFilters").filter("humanize",[function(){return function(str){if(void 0===str||null===str)return"";for(var frags=str.split("_"),i=0;i<frags.length;i++)frags[i]=frags[i].charAt(0).toUpperCase()+frags[i].slice(1);return frags.join(" ")}}]),angular.module("attCommon.commonFilters").filter("formatSeconds",function(){return function(seconds){var ret=Utils.secondsToString(seconds);return(""===ret||null===ret)&&(ret="0 sec"),ret}}),angular.module("attCommon.commonFilters").filter("reverse",function(){return function(items){return items.slice().reverse()}}),angular.module("attCommon.commonFilters").filter("unique",function(){return function(items,filterOn){if(filterOn===!1)return items;if((filterOn||angular.isUndefined(filterOn))&&angular.isArray(items)){var newItems=[],extractValueToCompare=function(item){return angular.isObject(item)&&angular.isString(filterOn)?item[filterOn]:item};angular.forEach(items,function(item){for(var isDuplicate=!1,i=0;i<newItems.length;i++)if(angular.equals(extractValueToCompare(newItems[i]),extractValueToCompare(item))){isDuplicate=!0;break}isDuplicate||newItems.push(item)}),items=newItems}return items}}),angular.module("attCommon.commonFilters").filter("capitalizeFirstLetter",function(){return function(str,delimiter){if(!str)return"";var delimiterToReplace=angular.isDefined(delimiter)?delimiter:"_";return str=str.replaceAll(delimiterToReplace," "),str=str.toLowerCase(),str=str.slice(0,1).toUpperCase()+str.slice(1,str.length)}}),angular.module("attCommon.commonFilters").filter("attComboBoxFilter",function(){return function(itemsArray,searchText,model,prop,initSearch,useAsCombo){var useProp=!1;if(null!=prop&&prop.length>0&&(useProp=!0),initSearch||null==model&&useAsCombo)return itemsArray;var outArr=[];return itemsArray.forEach(useAsCombo?function(item){useProp?String(item[prop]).toLowerCase().indexOf(String(model).toLowerCase())>-1&&outArr.push(item):String(item).toLowerCase().indexOf(String(model).toLowerCase())>-1&&outArr.push(item)}:function(item){useProp?String(item[prop]).toLowerCase().indexOf(searchText.toLowerCase())>-1&&outArr.push(item):String(item).toLowerCase().indexOf(searchText.toLowerCase())>-1&&outArr.push(item)}),outArr}}),angular.module("attCommon.commonFilters").filter("groupBy",function($timeout){return function(data,key){if(!key)return data;var outputPropertyName="__groupBy__"+key;if(!data[outputPropertyName]){for(var result={},i=0;i<data.length;i++)result[data[i][key]]||(result[data[i][key]]=[]),result[data[i][key]].push(data[i]);Object.defineProperty(data,outputPropertyName,{enumerable:!1,configurable:!0,writable:!1,value:result}),$timeout(function(){delete data[outputPropertyName]},0,!1)}return data[outputPropertyName]}}),angular.module("attCommon.commonFilters").filter("dateToUTC",function(){return function(date){var utcSeconds=date.getUTCSeconds(),utcMinutes=date.getUTCMinutes(),utcHours=date.getUTCHours(),utcDate=date.getUTCDate(),utcMonth=date.getUTCMonth(),utcFullYear=date.getUTCFullYear();return new Date(utcFullYear,utcMonth,utcDate,utcHours,utcMinutes,utcSeconds)}}),angular.module("attCommon.commonFilters").filter("dateToLocale",function(){return function(date,format,includeTime,ifTodayHideDate){function dateToLocale(dateObj){var lng=navigator.browserLanguage?navigator.browserLanguage:navigator.language,localeDate=dateObj.toLocaleDateString(lng);if(ifTodayHideDate){var currentDate=new Date;currentDate.getDate()==dateObj.getDate()&&currentDate.getMonth()==dateObj.getMonth()&&currentDate.getYear()==dateObj.getYear()&&(localeDate="")}if(includeTime){var localTime=dateObj.toLocaleTimeString(lng);localeDate.length>0&&(localeDate+=" "),localeDate+=localTime}return localeDate}if(0==date)return date;switch((void 0==ifTodayHideDate||""==ifTodayHideDate)&&(ifTodayHideDate=!1),format){case consts.DateToLocaleFilterFormats.YYYYminMMminDD:var dateArr=date.split("-"),newDate=new Date(dateArr[0],dateArr[1]-1,dateArr[2]);return dateToLocale(newDate);case consts.DateToLocaleFilterFormats.ticks:var newDate=new Date((date-621355968e9)/1e4);return dateToLocale(newDate);case consts.DateToLocaleFilterFormats.nanoSec:var newDate=new Date(date/1e3);return dateToLocale(newDate);case consts.DateToLocaleFilterFormats.dateObj:return dateToLocale(date)}}}),angular.module("attCommon.commonFilters").filter("attFilterBy",["$parse",function($parse){return function(collection,properties,search){var comparator;return search=ObjectUtils.isKind(search,"String")||ObjectUtils.isKind(search,"Number")?(search+"").toLowerCase():void 0,collection=ObjectUtils.isKind(collection,"Object")?toArray(collection):collection,!ObjectUtils.isKind(collection,"Array")||angular.isUndefined(search)?collection:ArrayUtils.filter(collection,function(elm){return ArrayUtils.some(properties,function(prop){if(~prop.indexOf("+")){var propList=prop.replace(new RegExp("\\s","g"),"").split("+");comparator=propList.reduce(function(prev,cur,index){return 1===index?$parse(prev)(elm)+" "+$parse(cur)(elm):prev+" "+$parse(cur)(elm)})}else comparator=$parse(prop)(elm);return ObjectUtils.isKind(comparator,"String")||ObjectUtils.isKind(comparator,"Number")||ObjectUtils.isKind(comparator,"Boolean")?comparator.toString().toLowerCase().indexOf(search)>=0:!1})})}}]),angular.module("attCommon.commonFilters").filter("attOrderBy",["$parse","$filter",function($parse){return function(array,sortPredicate,reverseOrder){function identity(a){return a}function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return descending?function(a,b){return comp(b,a)}:comp}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectToString(value){return null===value?"null":"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:"function"==typeof value.toString&&(value=value.toString(),isPrimitive(value))?value:""}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1===t2&&"object"===t1&&(v1=objectToString(v1),v2=objectToString(v2)),t1===t2?v1===v2?0:"string"===t1?Utils.naturalCompare(v1,v2):v2>v1?-1:1:t2>t1?-1:1}array=array||[],sortPredicate=ObjectUtils.isKind(sortPredicate,"Array")?sortPredicate:[sortPredicate],0===sortPredicate.length&&(sortPredicate=["+"]),sortPredicate=sortPredicate.map(function(predicate){var descending=!1,get=predicate||identity;if(ObjectUtils.isKind(predicate,"String")){if(("+"===predicate.charAt(0)||"-"===predicate.charAt(0))&&(descending="-"===predicate.charAt(0),predicate=predicate.substring(1)),""===predicate)return reverseComparator(compare,descending);if(get=$parse(predicate),get.constant){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)});var s=[];try{s=[].slice.call(array).sort(reverseComparator(comparator,reverseOrder))}catch(e){console.log(e)}return s}}])}(angular);