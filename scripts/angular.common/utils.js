var DEFAULT_EXTENSION="_Defaults",AUX_EXTENSION="_Aux",DEFAULT_FOR_ADD_PROP="default_for_add",TYPES_EXTENSION="_Types",VALIDATION_EXTENSION="_Validation";String.prototype.replaceAll=function(find,replace){var str=this;return str.replace(new RegExp(find.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),replace)},String.prototype.slugify=function(){return this.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")},String.prototype.unslugify=function(){return this.replace(/-/g," ").toInitCaps()},String.prototype.unsnakecaseify=function(){return this.replace(/_/g," ").toInitCaps()},String.prototype.comify=function(){for(var x=this.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"",rgx=/(\d+)(\d{3})/;rgx.test(x1);)x1=x1.replace(rgx,"$1,$2");return x1+x2},String.prototype.toInitCaps=function(){return this.replace(/\w*/g,function(str){return str.charAt(0).toUpperCase()+str.substr(1).toLowerCase()})},String.prototype.toVariableCamel=function(){var init=this.toInitCaps().replace(/[^0-9a-z]/gi,"");return init.charAt(0).toLowerCase()+init.slice(1)},String.prototype.captalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.toCamel=function(){return this.replace(/(\-[a-z])/g,function($1){return $1.toUpperCase().replace("-","")})},String.prototype.replaceAt=function(index,character){return this.substr(0,index)+character+this.substr(index+character.length)},String.prototype.startsWith=function(prefix){return 0===this.indexOf(prefix)},String.prototype.endsWith=function(str){return-1!==this.indexOf(str,this.length-str.length)},Number.prototype.toFixedDown=function(digits){var re=new RegExp("(\\d+\\.\\d{"+digits+"})(\\d)"),m=this.toString().match(re);return m?parseFloat(m[1]):this.valueOf()},String.prototype.format=function(args){var str=this;return str.replace(String.prototype.format.regex,function(item){var replace,intVal=parseInt(item.substring(1,item.length-1));return replace=intVal>=0&&intVal<args.length?args[intVal]:-1===intVal?"{":-2===intVal?"}":""})},String.prototype.format.regex=new RegExp("{-?[0-9]+}","g"),Date.prototype.getUTCTime=function(){return new Date(this.getUTCFullYear(),this.getUTCMonth(),this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()).getTime()},$.fn.SvgAddClass=function(className){var curClass=this.attr("class");null==curClass&&(curClass=""),this.attr("class",curClass+" "+className)},$.fn.SvgRemoveClass=function(className){var curClass=this.attr("class");null!=curClass&&(curClass=curClass.replaceAll(className,""),this.attr("class",curClass))};var Utils={getIeVersion:function(){var usAg=window.navigator.userAgent,msieIndex=usAg.indexOf("MSIE ");if(msieIndex>0)return parseInt(usAg.substring(msieIndex+5,usAg.indexOf(".",msieIndex)),10);var tridentIndex=usAg.indexOf("Trident/");if(tridentIndex>0){var rvIndex=usAg.indexOf("rv:");return parseInt(usAg.substring(rvIndex+3,usAg.indexOf(".",rvIndex)),10)}var edgeInedx=usAg.indexOf("Edge/");return edgeInedx>0?parseInt(usAg.substring(edgeInedx+5,usAg.indexOf(".",edgeInedx)),10):!1},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");return msie>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)},findIndex:function(array,name,value){for(var i=0;i<array.length;i++)if(array[i][name]==value)return i;return-1},findArrayItemByPropertyNameAndValue:function(array,name,value){for(var i=0;i<array.length;i++)if(array[i][name]==value)return array[i];return null},objectFindByKey:function(array,key,value){for(var i=0;i<array.length;i++)if(array[i][key]===value)return i;return-1},emptyArray:function(array){array.splice(0,array.length)},appendArrayToArray:function(sourceArray,arrayToAppend){Array.prototype.push.apply(sourceArray,arrayToAppend)},arrayMove:function(arr,fromIndex,toIndex){var element=arr[fromIndex];arr.splice(fromIndex,1),arr.splice(toIndex,0,element)},removeElementFromArray:function(array,element){var index=array.indexOf(element);return index>-1?(array.splice(index,1),!0):!1},serializeForm:function(form){var o={},groupAsArray=form.find("[rel='GroupAsArray']");if(groupAsArray.length>0){var fields=groupAsArray.serializeArray(),att=groupAsArray.attr("name");o[att]=[],_.each(fields,function(field){o[att].push(field.value)})}var propertiesObjArray=form.find(".TuProperty");if(propertiesObjArray.length>0){var att=propertiesObjArray.attr("dataSet");o[att]=[],_.each(propertiesObjArray,function(element){o[att].push({Name:element.name,Value:element.value})})}var fields=form.find(":input").not("[rel='GroupAsArray']").not(".TuProperty").serializeArray();return $.each(fields,function(){void 0!==o[this.name]?(o[this.name].push||(o[this.name]=[o[this.name]]),o[this.name].push(this.value||""),"on"==o[this.name]&&(o[this.name]=!0)):(o[this.name]=this.value||"","on"==o[this.name]&&(o[this.name]=!0))}),o},nullToEmptyString:function(str){return null==str?"":str},parenthesize:function(str,leadingSpace){leadingSpace=leadingSpace||!0;var ret="("+str+")";return leadingSpace&&(ret=" "+ret),ret},strEndsWith:function(str,suffix){return str.match(suffix+"$")==suffix},formatString:function(){var args=Array.prototype.slice.call(arguments),text=args.shift();return text.replace(/\{(\d+)\}/g,function(match,number){return"undefined"!=typeof args[number]?args[number]:match})},formatNumber:function(num){if("undefined"==typeof num)return"";var str=num.toString();return $.isNumeric(str)?str.indexOf(".")<0?str.comify():parseFloat(str).toFixed(2).comify():str},getTaskRemainingBytesTransferred:function(totalBytes,transferredBytes){var retVal="0";return 0===totalBytes?retVal:(retVal=totalBytes-transferredBytes,"0"!=retVal&&(retVal=retVal.toFixedDown(2)),retVal)},getTaskPercentBytesTransferred:function(completed,total,showPercentSymbol){var percent="0";return"0"==total||0==total||isNaN(total)?(showPercentSymbol&&(percent+="%"),percent):completed>total?(percent=100,showPercentSymbol&&(percent+="%"),percent):(percent=completed/total*100,percent=percent>100?100:percent,percent=0>percent?0:percent,100!=percent&&0!=percent&&(percent=percent.toFixedDown(1)),showPercentSymbol&&(percent+="%"),percent)},getAmountUnitLabel:function(dataAmount){var displayDigits=2,unitObj={dataRate:0,unitLabel:global_constants.Bytes,text:0};return null!=dataAmount&&(dataAmount<global_constants.Kilo?(unitObj.dataRate=dataAmount,unitObj.unitLabel=global_constants.Bytes):dataAmount>global_constants.Kilo&&dataAmount<global_constants.Mega?(unitObj.dataRate=dataAmount/global_constants.Kilo,unitObj.unitLabel=global_constants.KB):dataAmount>global_constants.Mega&&dataAmount<global_constants.Giga?(unitObj.dataRate=dataAmount/global_constants.Mega,unitObj.unitLabel=global_constants.MB):dataAmount>global_constants.Giga&&dataAmount<global_constants.Tera?(unitObj.dataRate=dataAmount/global_constants.Giga,unitObj.unitLabel=global_constants.GB):dataAmount>global_constants.Tera&&(unitObj.dataRate=dataAmount/global_constants.Tera,unitObj.unitLabel=global_constants.TB),unitObj.displayText=unitObj.dataRate>0?unitObj.dataRate.toFixedDown(displayDigits)+" "+unitObj.unitLabel:unitObj.dataRate),unitObj},getParameterByName:function(name){name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(location.href);return null==results?"":decodeURIComponent(results[1].replace(/\+/g," "))},changeValbToMbps:function(val){var retVal="0";return null==val?"":0===val||"0"==val?retVal:retVal=(8*val/global_constants.Mega).toFixedDown(2)},showAlertDialog:function(title,view,msg,onCancelCallBack,owner,buttonText,isHtml){new CustomAlertDialog({title:title,msg:msg,view:view,onCancel:onCancelCallBack,owner:owner,buttonText:buttonText,isHtml:isHtml})},showAlertPopup:function(title,text,onCancelCallBack,onOkCallBack,owner){new CustomAlertPopup({title:title,msg:text,onCancel:onCancelCallBack,onOK:onOkCallBack,owner:owner,closeWindowOnOK:!0})},showAlertPopupNoOkClose:function(title,text,onCancelCallBack,onOkCallBack,owner){new CustomAlertPopup({title:title,msg:text,onCancel:onCancelCallBack,onOK:onOkCallBack,owner:owner,closeWindowOnOK:!1})},showModal:function(title,view,okTitleName,cancelTitleName){new CustomModalView({title:title,view:view,okTitle:okTitleName,cancelTitle:cancelTitleName})},showAlertMessage:function(title,text,className,fadeOut,selectorName,showDetailsBtn,detailsBtnCallback,data){var theSelector=".alert";selectorName&&(theSelector=selectorName),$(theSelector).parents(".customModalView:visible").length>0&&(theSelector=".customModalView "+theSelector),$(theSelector).parents(".customAlertDialogWrapper:visible").length>0&&(theSelector=".customAlertDialogWrapper "+theSelector),theSelector+=":eq(0)",$(theSelector).empty(),$(theSelector).removeClass("alert-danger alert-warning alert-success alert-info"),$(theSelector).addClass(className+" fade in"),$(theSelector).html('<button type="button" class="close" data-dismiss="alert">Ã—</button><strong class="AlertErrorTitle"></strong><span class="AlertErrorMessage"></span>'),showDetailsBtn&&($(theSelector).append('<button id="showDetailsBtn">Show Details</button>'),$(theSelector).find("#showDetailsBtn").css("margin-left","50px"),$(theSelector).find("#showDetailsBtn").on("click",function(){detailsBtnCallback(data)})),$(theSelector).find(".AlertErrorTitle").text(title?title+": ":""),$(theSelector).find(".AlertErrorMessage").text(text),$(theSelector).css("position","absolute"),$(theSelector).css("zIndex","890"),$(theSelector).css("width",$(theSelector).parent().width()-50),$(theSelector).css("webkit-border-radius","0px"),$(theSelector).css("border-radius","0px"),$(theSelector).css("border","1px solid lightgray"),$(theSelector).css("width","100%"),$(theSelector).stop().show(),$(theSelector).css("opacity","1"),$(".alert .close").on("click",function(e){$(this).parent().hide(),$(".alert .close").parents("#modalDiv").find("#btnOk").removeClass("disabled"),e.stopPropagation(),e.preventDefault()})},hideAlertMessage:function(){$(".alert").hide()},openPageInTab:function(url,title){url=url.replace(/%20/g," "),title=title.replace(/ /g,""),window.open(url,title)},checkPassword:function(){var cc=[RGB(196,95,95),RGB(236,179,80),RGB(90,165,179),RGB(112,178,87),RGB(112,178,87)],psw=$("#Password").val(),percent=0,text="Too Short",score=0,txt=$(".PassStrBoxText");psw.length>=8?(psw.match(/[a-z]/)&&psw.match(/[A-Z]/)&&score++,psw.match(/\d+/)&&score++,psw.match(/.[!,@@,#,$,%,^,&,*,?,_,~,-,(,)]/)&&score++,psw.length>12&&score++,percent=20*(score+1),text=["Very Strong","Strong","Good","Fair","Weak"][4-score]):0==psw.length&&(text=""),txt.text(text),txt.css("color",cc[score]),$("#PassStrengthInner").css("width",percent+"%").css("background-color",cc[score])},repositionModal:function(){var h=$(".modal").height(),wh=$(window).height();wh>h?($(".modal").css("top",(wh-h)/2+"px"),$(".modal").css("margin-top","0px")):$(".modal").css("position","absolute");var w=$(".modal").width(),ww=$(window).width();ww>w?($(".modal").css("left",(ww-w)/2+"px"),$(".modal").css("margin-left","0px")):$(".modal").css("position","absolute")},ConvertTicksToMS:function(pTicks){var dateTimeMS;return dateTimeMS=(pTicks-621355968e9)/1e4},getElapsedTime:function(start_date,end_date){var digits=2,ret={elapsed:0,elapsed_str:"N/A"};if(null==start_date||null==end_date)return ret;var milliSec=Math.abs(new Date(end_date)-new Date(start_date));return ret.elapsed=parseFloat((milliSec/1e3).toFixed(digits)),ret.elapsed_str=Utils.secondsToString((milliSec/1e3).toFixed(digits)),ret},UtcToLocalDate:function(date){var newDate=new Date(date.getTime()-60*Utils.getTimezoneOffset()*1e3);return newDate},LocalDateToUtc:function(date){var utcDate=new Date;return utcDate.setTime(date.getTime()+6e4*Utils.getTimezoneOffset()),utcDate},getTimezoneOffset:function(){return(new Date).getTimezoneOffset()},isLocalTimeDST:function(){var jan=new Date(Utils.Now().getFullYear(),0,1),jul=new Date(Utils.Now().getFullYear(),6,1),stdTimezoneOffset=Math.max(jan.getTimezoneOffset(),jul.getTimezoneOffset());return Utils.getTimezoneOffset()<stdTimezoneOffset},ConvertTicksToDate:function(pTicks){var dateTimeObject;return dateTimeObject=new Date((pTicks-621355968e9)/1e4)},ConvertDateToTicks:function(date){return 1e4*date.getTime()+621355968e9},ConvertTicksToShortTime:function(ticks){if(0!=ticks&&621355968e9!=ticks){var dateTimeObject=this.ConvertTicksToDate(ticks);return dateTimeObject.toLocaleDateString()+" "+this.ConvertTicksToShortTimeOnly(ticks,!0)}return" "},convertTicksToMilliseconds:function(ticks){return Math.floor(ticks/1e3)},convertMillisecondsToTicks:function(millis){return 1e3*millis},autoSelectDateFormatter:function(date){for(var dateFormatters=[function(d){var dateTime=d.split(" "),date=dateTime[0].split("-"),temp=date[0];return date[0]=date[2],date[2]=(1===date[1].length?"0":"")+date[1],date[1]=(1===temp.length?"0":"")+temp,date.join("-")+(dateTime[1]?"T"+dateTime[1]:"")},function(date){var re=/ \d:\d\d/,match=re.exec(date);if(null!=match){var index=date.indexOf(match[0]);date=date.substring(0,index)+" 0"+match[0].substring(1)+date.substring(index+match[0].length)}var date=date.replace(" ","T");return date},function(date){return date.replace("-","/")},function(date){var re=/\D\D\D \d\d\d\d.*/;if(!re.exec(date))return 0/0;var dateTime=date.split(" ");return dateTime.splice(1,0,"01"),dateTime.join(" ")}],i=0;i<dateFormatters.length;i++)try{if(!isNaN(Date.parse(dateFormatters[i](date))))return dateFormatters[i]}catch(err){console.log("ERROR - Parsing date "+dateFormatters[i](date)+" with date parser "+i)}return void console.log("ERROR - No suitable date formatter found for string '"+date+"'")},createUniqueId:function(){var date=new Date,components=[date.getYear(),date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()];return components.join("")},createGuid:function(){var s4=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4()},ConvertTicksToShortTimeOnly:function(ticks,showSeconds){if(0!=ticks){var dateTimeObject=this.ConvertTicksToDate(ticks),hours=dateTimeObject.getHours()<10?"0"+dateTimeObject.getHours():dateTimeObject.getHours(),minutes=dateTimeObject.getMinutes()<10?"0"+dateTimeObject.getMinutes():dateTimeObject.getMinutes(),seconds=dateTimeObject.getSeconds()<10?"0"+dateTimeObject.getSeconds():dateTimeObject.getSeconds();return showSeconds?hours+":"+minutes+":"+seconds:hours+":"+minutes}return" "},ConvertTicksToLocalTime:function(ticks){if(0!=ticks){var dateTimeObject=this.ConvertTicksToDate(ticks);return dateTimeObject.toLocaleTimeString()}return" "},setHeaderActive:function(){var url=Backbone.history.location.hash;if(url=url.toLowerCase(),""!=url&&"#"!=url&&-1==url.indexOf("register")&&-1==url.indexOf("confirmregistration")&&-1==url.indexOf("forgotpassword")&&-1==url.indexOf("passwordmailwassent")&&-1==url.indexOf("logout")){var sessionToken=Amplify.store("sessionToken");null!=sessionToken?($(".navigation li").removeClass("active"),-1!==url.indexOf("services")?$(".navigation li").eq(0).addClass("active"):-1!==url.indexOf("activetasks")||-1!==url.indexOf("archivedtasks")||-1!==url.indexOf("scheduledtasks")||-1!==url.indexOf("failedtasks")||-1!==url.indexOf("tasksinstances")?$(".navigation li").eq(1).addClass("active"):-1!==url.indexOf("groups")?$(".navigation li").eq(2).addClass("active"):-1!==url.indexOf("resources")?$(".navigation li").eq(3).addClass("active"):-1!==url.indexOf("users")?$(".navigation li").eq(4).addClass("active"):-1!==url.indexOf("account")&&$(".navigation li").eq(5).addClass("active"),-1==url.indexOf("services")&&null!=window.msnrySubscription&&($("#servicesListContainer").length>0&&$("#content").empty(),window.msnrySubscription.destroy(),window.msnryServices.destroy(),delete window.msnrySubscription,delete window.msnryServices)):-1==url.indexOf("logout")&&Backbone.history.navigate("logout",!0)}},toRGB:function(str){for(var hash=0,i=0;i<str.length;i++)hash=str.charCodeAt(i)+((hash<<5)-hash);return((hash>>24&255).toString(16)+(hash>>16&255).toString(16)+(hash>>8&255).toString(16)+(255&hash).toString(16)).substring(0,6)},trimAndRemoveDoubleSpaces:function(str){if(1==str||0==str)return str;for(str=$.trim(str),str=str.replaceAll("  "," ");-1!=str.indexOf("  ");)str=str.replaceAll("  "," ");return str},FieldsToModel:function(model,NestedFieldPath,FieldValue,method){null==method&&(method="set");for(var props=NestedFieldPath.split("."),attr=model,i=0;i<props.length;i++)attr="set"==method&&i==props.length-1?attr.set(props[i],FieldValue):attr.get(props[i]);return"get"==method?attr:void 0},capitalizeFirstLowerOthers:function(str){return""==str||null==str||null==str[0]?global_constants.N_A:str[0].toUpperCase()+str.slice(1).toLowerCase()},secondsToTimeString:function(seconds){var numyears=Math.floor(seconds/31536e3),numdays=Math.floor(seconds%31536e3/86400),numhours=Math.floor(seconds%31536e3%86400/3600),numminutes=Math.floor(seconds%31536e3%86400%3600/60),numseconds=seconds%31536e3%86400%3600%60,retVal="";numyears>0&&(retVal+=numyears>1?numyears+" years ":numyears+" year "),numdays>0&&(retVal+=numdays>1?numdays+" days ":numdays+" day "),numhours=(10>numhours?"0":"")+numhours,numminutes=(10>numminutes?"0":"")+numminutes,numseconds=(10>numseconds?"0":"")+numseconds;var timeFormat=numhours+":"+numminutes+":"+numseconds;return retVal+timeFormat},secondsToString:function(seconds){var numyears=Math.floor(seconds/31536e3),numdays=Math.floor(seconds%31536e3/86400),numhours=Math.floor(seconds%31536e3%86400/3600),numminutes=Math.floor(seconds%31536e3%86400%3600/60),numseconds=(seconds%31536e3%86400%3600%60).toFixed(2),retVal="";return numyears>0&&(retVal+=numyears>1?numyears+" years ":numyears+" year "),numdays>0&&(retVal+=numdays>1?numdays+" days ":numdays+" day "),numhours>0&&(retVal+=numhours>1?numhours+" hours ":numhours+" hour "),numminutes>0&&(retVal+=numminutes>1?numminutes+" mins ":numminutes+" min "),numseconds>0&&(retVal+=numseconds>1?numseconds+" secs ":numseconds+" sec "),retVal},millisecondsToStr:function(milliseconds){function numberEnding(number){return number>1?"s":""}var temp=Math.floor(milliseconds/1e3),years=Math.floor(temp/31536e3);if(years)return years+" year"+numberEnding(years);var days=Math.floor((temp%=31536e3)/86400);if(days)return days+" day"+numberEnding(days);var hours=Math.floor((temp%=86400)/3600);if(hours)return hours+" hour"+numberEnding(hours);var minutes=Math.floor((temp%=3600)/60);if(minutes)return minutes+" minute"+numberEnding(minutes);var seconds=temp%60;return seconds?seconds+" second"+numberEnding(seconds):"less than a second"},hoursMultiToStringConverter:function(hours){var newHours=[];return hours.forEach(function(entry){var a=entry.substring(0,2),b=entry.substring(2,4);newHours.push(a+":"+b)}),newHours.join(",")},isNumericChar:function(key,ctrlKey,shiftKey){return-1!=$.inArray(key,[46,8,9,27,13,190])||65==key&&ctrlKey===!0||key>=35&&39>=key?!0:shiftKey||(48>key||key>57)&&(96>key||key>105)?!1:!0},checkMaxMinValues:function(e,min,max){return""==e.target.value||0==$.isNumeric(e.target.value)?(e.preventDefault(),e.target.value=min,!1):(e.target.value>max&&(e.target.value=max),e.target.value==min-1&&(e.target.value=min),!0)},checkValidPath:function(e){var _ref=e.target.value;if(_ref.indexOf("<")>-1||_ref.indexOf(">")>-1||_ref.indexOf("|")>-1||_ref.indexOf("*")>-1||_ref.indexOf("?")>-1)return!1;var regexOption="i",regexVal1='^[A-Z]:\\\\[^/|\\?|<|>|:|\\*|\\"|\\|]*';regexVal1=this.buildRegex(regexVal1,regexOption);var regValid1=regexVal1.test(_ref),regexVal2='^/[^/|\\?|<|>|:|\\*|\\"|\\|]*';regexVal2=this.buildRegex(regexVal2,regexOption);var regValid2=regexVal2.test(_ref),regexVal3='^\\\\\\\\[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\\\[^/|\\?|<|>|:|\\*|"|\\|]+';regexVal3=this.buildRegex(regexVal3,regexOption);var regValid3=regexVal3.test(_ref),regexVal4='^\\\\\\\\([A-Z|a-z|0-9|-]{1,63}\\.)*[A-Z|a-z|0-9|-]{1,63}\\\\[^/|\\?|<|>|:|\\*|\\"|\\|]+';regexVal4=this.buildRegex(regexVal4,regexOption);var regValid4=regexVal4.test(_ref);return regValid1||regValid2||regValid3||regValid4},buildRegex:function(value,option){return new RegExp(value,option)},addValidationDirectoryFieldToModel:function(model,field){field=field.replaceAll(".",".attributes."),model.validation[field]={required:!0,fileSystemName:"[+><.|%&#:?\\\\]+"}},addValidationFileFieldToModel:function(model,field){field=field.replaceAll(".",".attributes."),model.validation[field]={required:!0,fileSystemName:"[+><|%&#?]+"}},addValidationFieldToModel:function(model,field){field=field.replaceAll(".",".attributes."),model.validation[field]={required:!0}},deleteValidationFieldFromModel:function(model,field){field=field.replaceAll(".",".attributes."),model.validation[field]&&delete model.validation[field]},bytesToSize:function(bytes){var sizes=["Bytes","KB","MB","GB","TB"];if(0==bytes)return"0 Bytes";var i=parseInt(Math.floor(Math.log(bytes)/Math.log(1024)));return Math.round(bytes/Math.pow(1024,i),2)+" "+sizes[i]},daysBetween:function(startDate,endDate){var millisecondsPerDay=864e5;return(Utils.treatAsUTC(endDate)-Utils.treatAsUTC(startDate))/millisecondsPerDay},treatAsUTC:function(date){var result=new Date(date);return result.setMinutes(result.getMinutes()-result.getTimezoneOffset()),result},isValidEmail:function(value){var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return re.test(value)},GetMaxZindex:function(selector){var maxzIndex=800;return $(selector).each(function(){var zIndex=parseInt($(this).css("z-index"),10);zIndex>maxzIndex&&(maxzIndex=zIndex)}),maxzIndex},createCRON:function(utcMinutes,utcHours,utcDate,utcMonthForCRON,daysOfWeek,utcFullYear){var cronTemplate="{0} {1} {2} {3} {4} {5}";return cronTemplate.format([utcMinutes,utcHours,utcDate,utcMonthForCRON,daysOfWeek,utcFullYear])},getDateFromCRON:function(cron,is_utc){var tokenArr=cron.split(" "),date=new Date;return is_utc||null==is_utc?(date.setUTCMinutes(parseFloat(tokenArr[0].toString())),date.setUTCHours(parseFloat(tokenArr[1].toString())),date.setUTCDate(parseFloat(tokenArr[2].toString())),date.setUTCMonth(parseFloat(tokenArr[3].toString())-1),date.setUTCFullYear(parseFloat(tokenArr[5].toString()))):(date.setMinutes(parseFloat(tokenArr[0].toString())),date.setHours(parseFloat(tokenArr[1].toString())),date.setDate(parseFloat(tokenArr[2].toString())),date.setMonth(parseFloat(tokenArr[3].toString())-1),date.setFullYear(parseFloat(tokenArr[5].toString()))),date},shortenText:function(text,maxLength,addDots){var retString="";return retString="string"==typeof text&&null!=text&&text.length>maxLength?addDots?text.substring(0,maxLength)+"...":text.substring(0,maxLength):text},shortenTextFromEnd:function(text,maxLength,addDots){var retString="";return retString="string"==typeof text&&null!=text&&text.length>maxLength?addDots?"..."+text.substring(text.length-maxLength):text.substring(text.length-maxLength):text},clearTextSelection:function(){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){var sel=window.getSelection();sel.removeAllRanges()}},selectElementContents:function(el){var range=document.createRange();range.selectNodeContents(el);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)},parseQueryString:function(queryString){var params={};return queryString&&_.each(_.map(decodeURI(queryString).split(/[&?]/g),function(el){var aux=el.split("="),o={};if(aux.length>=1){var val=void 0;2==aux.length&&(val=aux[1]),o[aux[0]]=val}return o}),function(o){_.extend(params,o)}),params},isOnScreen:function(seletcor){var win=$(window),viewport={top:win.scrollTop(),left:win.scrollLeft()};viewport.right=viewport.left+win.width(),viewport.bottom=viewport.top+win.height();var bounds=$(seletcor).offset();return bounds.right=bounds.left+$(seletcor).outerWidth(),bounds.bottom=bounds.top+$(seletcor).outerHeight(),!(viewport.right<bounds.left||viewport.left>bounds.right||viewport.bottom<bounds.top||viewport.top>bounds.bottom)},getOrdinalNumber:function(n){var s=["th","st","nd","rd"],v=n%100;return n+(s[(v-20)%10]||s[v]||s[0])},getBitWiseValue:function(stringValue,eNumValuesObject,splitterChar){var intValue=0,SPLITTER=",",WHITE_SPACE=" ";splitterChar!=WHITE_SPACE&&stringValue.indexOf(WHITE_SPACE)>-1&&(stringValue=stringValue.split(WHITE_SPACE).join("")),null!=splitterChar&&1==splitterChar.length&&(SPLITTER=splitterChar);var splintedArray=stringValue.split(SPLITTER);return _.each(splintedArray,function(eNumItem){null!=eNumItem&&eNumItem.length>0&&null!=eNumValuesObject[eNumItem]&&"number"==typeof eNumValuesObject[eNumItem]&&(intValue+=eNumValuesObject[eNumItem])}),intValue},numberWithCommas:function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},checkMaestroBiReadyLicense:function(license_info){var ret={is_valid:!0,message:""};if(""==license_info||null==license_info)return ret.is_valid=!1,ret;var licenseInfo=license_info.info,licenseExpirationDateStr=licenseInfo.expiration_date,licenseExpirationDateArr=licenseExpirationDateStr.split("-"),licenseExpirationDate=new Date(licenseExpirationDateArr[0],licenseExpirationDateArr[1]-1,licenseExpirationDateArr[2]);licenseExpirationDate.setDate(licenseExpirationDate.getDate()+1);var currentDate=new Date,datesDiffInDays=(licenseExpirationDate-currentDate)/1e3/60/60/24;return 7>datesDiffInDays&&(licenseExpirationDate.getDate()==currentDate.getDate()+1?(ret.is_valid=!0,ret.message="Last day of license"):(datesDiffInDays=Math.floor(datesDiffInDays),0>datesDiffInDays?(ret.is_valid=!1,ret.message="License has expired "+Math.abs(datesDiffInDays)+" day(s) ago"):(ret.is_valid=!0,ret.message="License will expire in "+datesDiffInDays+" day(s)"))),ret},validateQueryStringParams:function(url,requestName){var variables=url.match(/\{(.*?)\}/g);if(variables&&0!=variables.length){for(var exceptionParams="",i=0;i<variables.length;i++)exceptionParams+=variables[i]+" ";var request=requestName||"";throw exceptionParams+="was not passed to request "+request,new Error(exceptionParams)}},createNewDefaultObject:function(type,is_for_add){var defaultObj={};$.extend(!0,defaultObj,DO[type+DEFAULT_EXTENSION]);var aux=DO[type+AUX_EXTENSION];if(is_for_add&&aux){var defaults_for_add={},tmp=ObjectUtils.filter(aux,function(key,val){return null!=val[DEFAULT_FOR_ADD_PROP]});ObjectUtils.forOwn(tmp,function(key,val){defaults_for_add[key]=val[DEFAULT_FOR_ADD_PROP]}),$.extend(!0,defaultObj,defaults_for_add)}var typesObj=DO[type+TYPES_EXTENSION];for(var type in typesObj)if(typesObj.hasOwnProperty(type)&&!$.isArray(defaultObj[type])&&null==defaultObj[type]){var value=this.createNewDefaultObject(typesObj[type],is_for_add);defaultObj[type]=angular.isUndefined(value)||angular.equals(value,{})?defaultObj[type]:value}return defaultObj},deepCloneOfJsonObjects:function(object){var clonedObj={};for(var field in object)clonedObj[field]=_.isObject(object[field])?this.deepCloneOfJsonObjects(object[field]):object[field];return clonedObj},deepCloneOfJsonObjectsWithArrays:function(object){if(_.isObject(object)){var clonedObj={};for(var field in object)if("$$hashKey"!=field)if(_.isArray(object[field])){clonedObj[field]=[];var self=this;_.each(object[field],function(item){clonedObj[field].push(self.deepCloneOfJsonObjectsWithArrays(item))})}else clonedObj[field]=_.isObject(object[field])?this.deepCloneOfJsonObjectsWithArrays(object[field]):object[field];return clonedObj}return object},mergeValuedObjToDefaultValuedObj:function(sourceObj,sourceObjType){if(null==sourceObj)return null;var targetObj=Utils.createNewDefaultObject(sourceObjType);for(var prop in targetObj)if(null!=sourceObj[prop]){var itemType=DO[sourceObjType+TYPES_EXTENSION][prop];if($.isArray(sourceObj[prop]))for(var index=0;index<sourceObj[prop].length;index++)if($.isPlainObject(sourceObj[prop][index])){var type=sourceObj[prop][index].$type||itemType,extendedItem=this.mergeValuedObjToDefaultValuedObj(sourceObj[prop][index],type);targetObj[prop][index]=extendedItem}else targetObj[prop][index]=sourceObj[prop][index];else if($.isPlainObject(sourceObj[prop])){var type=sourceObj[prop].$type||itemType;"KeyValue"==itemType?targetObj[prop]=sourceObj[prop]:itemType&&0==itemType.indexOf("KeyValue")?(targetObj[prop]={},ObjectUtils.forOwn(sourceObj[prop],function(key,value){var type=value.$type||DO[itemType+TYPES_EXTENSION].value;targetObj[prop][key]=type?this.mergeValuedObjToDefaultValuedObj(sourceObj[prop][key],type):sourceObj[prop][key]},this)):targetObj[prop]=this.mergeValuedObjToDefaultValuedObj(sourceObj[prop],type)}else targetObj[prop]=sourceObj[prop]}return targetObj},mergeValuesFromOtherObject:function(source,other){for(var prop in other)if(source.hasOwnProperty(prop))if(_.isArray(other[prop])){_.isArray(source[prop])?source[prop].length=0:source[prop]=[];for(var index=0;index<other[prop].length;index++){var item=other[prop][index];source[prop].push(_.isObject(item)?this.deepCloneOfJsonObjectsWithArrays(item):item)}}else _.isObject(other[prop])?this.mergeValuesFromOtherObject(source[prop],other[prop]):source[prop]=other[prop]},generateNewName:function(namePrefix,nameExistCallback,addedChar,startCounter){var MAX_COUNTER=1e4,counter=2;null!=startCounter&&(counter=Number(startCounter));var name=namePrefix;for(null==addedChar&&(addedChar=" ");nameExistCallback(name)&&MAX_COUNTER>counter;)name=namePrefix+addedChar+counter.toString(),counter++;return name},func:function(str){for(var utf8=unescape(encodeURIComponent(str)),arr=[],i=0;i<utf8.length;i++)arr.push(utf8.charCodeAt(i))},isEmptyObject:function(obj){return _.isEmpty(obj)},getInputSelection:function(el){var normalizedValue,range,textInputRange,len,endRange,start=0,end=0;return"number"==typeof el.selectionStart&&"number"==typeof el.selectionEnd?(start=el.selectionStart,end=el.selectionEnd):(range=document.selection.createRange(),range&&range.parentElement()==el&&(len=el.value.length,normalizedValue=el.value.replace(/\r\n/g,"\n"),textInputRange=el.createTextRange(),textInputRange.moveToBookmark(range.getBookmark()),endRange=el.createTextRange(),endRange.collapse(!1),textInputRange.compareEndPoints("StartToEnd",endRange)>-1?start=end=len:(start=-textInputRange.moveStart("character",-len),start+=normalizedValue.slice(0,start).split("\n").length-1,textInputRange.compareEndPoints("EndToEnd",endRange)>-1?end=len:(end=-textInputRange.moveEnd("character",-len),end+=normalizedValue.slice(0,end).split("\n").length-1)))),{start:start,end:end}},isDebugMode:function(){return window&&null!=window.isDbg&&1==window.isDbg},setDebugMode:function(enabled){window.isDbg=enabled?!0:null},writeDebugLine:function(line){if(this.isDebugMode()&&null!=line&&""!=line){var lineToWrite=(new Date).toLocaleTimeString()+" , DEBUG LINE : ";lineToWrite+="object"==typeof line?JSON.stringify(line):line,console.debug?console.debug(lineToWrite):console.log(lineToWrite)}},replaceSelectedText:function(el,text){var sel=Utils.getInputSelection(el),val=el.value;el.value=val.slice(0,sel.start)+text+val.slice(sel.end)},removeDefaultValues:function(obj,type){if(null==type)return obj;var defaultsObj=Utils.createNewDefaultObject(type),typesObj=DO[type+TYPES_EXTENSION];return ObjectUtils.reject(obj,function(key,value){if(ObjectUtils.isKind(value,"Object")){var typeStr=value.$type;if(!typeStr){if(!typesObj)return!1;typeStr=typesObj[key]}return obj[key]=Utils.removeDefaultValues(obj[key],typeStr),!1}if(ObjectUtils.isKind(value,"Array")){for(var i=0;i<value.length;i++){var typeStr=obj[key][i].$type||typesObj[key];ObjectUtils.isKind(obj[key][i],"Object")&&(obj[key][i]=Utils.removeDefaultValues(obj[key][i],typeStr))}return!1}return"$type"!=key&&defaultsObj[key]==value&&(null==DO[type+VALIDATION_EXTENSION][key]||!DO[type+VALIDATION_EXTENSION][key].required)})},pad:function(n){return 10>n?"0"+n:n},getSelectedIndexAfterAction:function(list,current_index,lastAction,search_item_name,search_prop){return null!=lastAction&&(lastAction=lastAction.toLowerCase()),null==lastAction?null==list||0==list.length?current_index=-1:list.length>0&&current_index>list.length?current_index=list.length-1:list.length>0&&-1==current_index&&(null==search_item_name||""==search_item_name?current_index=0:angular.forEach(list,function(item,idx,data){search_item_name==item[search_prop]&&(current_index=data.indexOf(item))
})):"new"==lastAction?null!=search_item_name?angular.forEach(list,function(item,idx,data){search_item_name==item[search_prop]&&(current_index=data.indexOf(item))}):current_index=list.length>0?list.length-1:-1:"delete"==lastAction&&(list.length>0?0==current_index?current_index=0:current_index-=1:current_index=-1),0>current_index&&list.length>0&&(current_index=0),current_index},mergeValuedObjToMockValuedObj:function(sourceObj,sourceObjType){if(null==sourceObj)return null;var targetObj=Utils.createNewDefaultObject(sourceObjType);for(var prop in targetObj)if(null!=targetObj[prop]){var itemType=DO[sourceObjType+TYPES_EXTENSION][prop];if($.isArray(targetObj[prop]))for(var index=(Math.floor(10*Math.random()),0);10>index;index++)targetObj[prop].push(Utils.mergeValuedObjToMockValuedObj({},itemType));else if($.isPlainObject(targetObj[prop]))"KeyValue"==itemType?targetObj[prop]={}:0==itemType.indexOf("KeyValue")?(targetObj[prop]={},ObjectUtils.forOwn(targetObj[prop],function(key,value){var type=value.$type||DO[itemType+TYPES_EXTENSION].value;targetObj[prop][key]=this.mergeValuedObjToMockValuedObj({},type)},this)):targetObj[prop]=Utils.mergeValuedObjToMockValuedObj({},itemType);else{if(null!=itemType){var enumVals=Object.keys(DO[itemType]);targetObj[prop]=enumVals[Math.floor(Math.random()*enumVals.length)]}targetObj[prop]=Utils.getRandomForType(prop,targetObj[prop])}}return targetObj},getRandomForType:function(prop,val){function randomDate(start,end){return new Date(start.getTime()+Math.random()*(end.getTime()-start.getTime()))}var res=null;if(ObjectUtils.isKind(val,"String"))if(prop.toLowerCase().indexOf("date")>=0&&(val=randomDate(new Date(2012,0,1),new Date)),0!=val.length)res=val;else{res="";for(var possible="ABCDEFGHIJKLMNOPQRSTU VWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;10>i;i++)res+=possible.charAt(Math.floor(Math.random()*possible.length))}else ObjectUtils.isKind(val,"Number")?res=Math.floor(200*Math.random())+1:ObjectUtils.isKind(val,"Date")&&(res=randomDate(new Date(2012,0,1),new Date));return res},createExportData:function(items,csv_props){var export_data=[];return export_data.push(csv_props.map(function(it){return it.display_name})),angular.forEach(items,function(item){for(var temp_row=[],i=0;i<csv_props.length;i++){var prop=csv_props[i],ret="";angular.isFunction(prop.convertFunc)&&prop.convertFunc?ret=prop.convertFunc(item):(ret=ObjectUtils.propsByString(item,prop.csvProps.join(".")),(void 0==ret||null==ret)&&(ret="")),temp_row.push(ret)}export_data.push(temp_row)}),export_data},exportToCsv:function(filename,rows){for(var processRow=function(row){for(var finalVal="",j=0;j<row.length;j++){var innerValue=null===row[j]?"":row[j].toString();row[j]instanceof Date&&(innerValue=row[j].toLocaleString());var result=innerValue.replace(/"/g,'""');result.search(/("|,|\n)/g)>=0&&(result='"'+result+'"'),j>0&&(finalVal+=","),finalVal+=result}return finalVal+"\n"},csvFile="",i=0;i<rows.length;i++)csvFile+=processRow(rows[i]);Utils.downloadFile(csvFile,filename,"text/csv;charset=utf-8;")},exportToTsv:function(filename,rows){for(var processRow=function(row){for(var finalVal="",j=0;j<row.length;j++){var innerValue=null===row[j]?"":row[j].toString();row[j]instanceof Date&&(innerValue=row[j].toLocaleString());var result=innerValue.replace(/"/g,'""');result.search(/("|,|\n)/g)>=0&&(result='"'+result+'"'),j>0&&(finalVal+="	"),finalVal+=result}return finalVal+"\n"},csvFile="",i=0;i<rows.length;i++)csvFile+=processRow(rows[i]);Utils.downloadFile(csvFile,filename,"text/tsv;charset=utf-8;")},exportToHtml:function(filename,htmlContent,styleEl){var style=styleEl||"",$htmlFile="<html><head>{0}</head><body>{1}</body></html>";$htmlFile=String.format($htmlFile,style,htmlContent),Utils.downloadFile($htmlFile,filename,"text/html;charset=utf-8;")},downloadFile:function(fileContent,filename,filetype){var blob=new Blob([fileContent],{type:filetype});if(navigator.msSaveBlob)navigator.msSaveBlob(blob,filename);else{var link=document.createElement("a");if(void 0!==link.download){var url=URL.createObjectURL(blob);link.setAttribute("href",url),link.setAttribute("download",filename),link.style.visibility="hidden",document.body.appendChild(link),link.click(),document.body.removeChild(link)}}},getCookie:function(name){var re=new RegExp(name+"=([^;]+)"),value=re.exec(document.cookie);return null!=value?decodeURIComponent(value[1]):null},SynchronizedInvokerQueue:function(){var arr=[],methodInProgress=!1;return this.pushToQueue=function(fn,params,onSuccess,onError){var self=this;arr.push({fn:fn,params:params,success:function(data){onSuccess&&onSuccess(data),methodInProgress=!1,self.invoke()},error:function(msg){onError&&onError(msg),methodInProgress=!1,self.invoke()}}),self.invoke()},this.invoke=function(){if(null!=arr&&arr.length>0&&!methodInProgress){methodInProgress=!0;var methodToInvoke=arr.pop();null==methodToInvoke.params&&(methodToInvoke.params=[]);var params=methodToInvoke.params.concat([methodToInvoke.success,methodToInvoke.error]);null!=methodToInvoke.fn&&methodToInvoke.fn.apply(this,params)}},this},isSameDay:function(date1,date2){return date1.getYear()==date2.getYear()&&date1.getMonth()==date2.getMonth()&&date1.getDate()==date2.getDate()},Now:function(){return new Date},GetCodeMirrorInstance:function(class_name){class_name=class_name||"CodeMirror";var instance=null;try{instance=document.getElementsByClassName(class_name)[0].CodeMirror}catch(e){}return instance},debounce:function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},loadJS:function(filename,filetype){if("js"==filetype){var fileref=document.createElement("script");fileref.setAttribute("type","text/javascript"),fileref.setAttribute("src",filename)}else if("css"==filetype){var fileref=document.createElement("link");fileref.setAttribute("rel","stylesheet"),fileref.setAttribute("type","text/css"),fileref.setAttribute("href",filename)}"undefined"!=typeof fileref&&document.getElementsByTagName("head")[0].appendChild(fileref)},naturalCompare:function(leftItem,rightItem){if(null==leftItem&&null==rightItem)return 0;if(null==leftItem)return-1;if(null==rightItem)return 1;var leftInnerArray=[],rightInnerArray=[],regexD=/(\d+)|(\D+)/g;for(leftItem.replace(regexD,function(_,arg1,arg2){leftInnerArray.push([arg1||1/0,arg2||""])}),rightItem.replace(regexD,function(_,arg1,arg2){rightInnerArray.push([arg1||1/0,arg2||""])});leftInnerArray.length&&rightInnerArray.length;){var leftArrayShift=leftInnerArray.shift(),rightArr=rightInnerArray.shift(),resultCompare=leftArrayShift[0]-rightArr[0]||leftArrayShift[1].localeCompare(rightArr[1]);if(resultCompare)return resultCompare}return leftInnerArray.length-rightInnerArray.length},BoolToBool:function(val){return"true"===String(val)},CopyToClipBoard:function(text){var tempDomInput=document.createElement("input");$(tempDomInput).css("width","2px"),$(tempDomInput).css("height","2px"),$(tempDomInput).css("padding","0"),$(tempDomInput).css("margin","0"),$(tempDomInput).css("position","fixed"),$(tempDomInput).css("top","100%"),$(tempDomInput).css("left","100%"),$(tempDomInput).css("border","none"),$(tempDomInput).css("outline","none"),$(tempDomInput).css("boxShadow","none"),$(tempDomInput).css("background","transparent"),tempDomInput.value=text,document.body.appendChild(tempDomInput);try{tempDomInput.select(),document.execCommand("copy")}catch(err){}document.body.removeChild(tempDomInput)},createConditionalTimer:function(interval,shouldStop,stopCallback,maxCalls){setTimeout(function(){shouldStop()||0===maxCalls?stopCallback():Utils.createConditionalTimer(interval,shouldStop,stopCallback,maxCalls?maxCalls-1:null)},interval)},blurElement:function($event){$event&&$event.currentTarget&&$event.currentTarget.blur&&$event.currentTarget.blur()}},RGB=function(r,g,b){var rgb=b|g<<8|r<<16;return"#"+rgb.toString(16)};$.fn.linkTextInput=function(options){var self=this;self.addClass("linkStyle linkStyleColor"),self.text("N");var inputID=self.attr("id")+"_TI";$("#"+inputID).remove(),self.after("<input type='text' id='"+inputID+"'>");var $input=$(self.parent()).find("#"+inputID),inputWidth=null==options||null==options.width?"50px":options.width+"px";$input.css("width",inputWidth),$input.css("display","none"),self.on("click",function(){self.hasClass("disabled")||(self.css("display","none"),$input.css("display","inline-block"),$input.text(self.text()),$input.focus())}),$input.on("focusout",function(){displayLink()}),$input.keyup(function(e){13==e.keyCode&&displayLink()});var displayLink=function(){self.css("display","inline-block"),$input.css("display","none");var inputText=""==$input.val()?"N":$input.val();self.text(inputText)};return self};