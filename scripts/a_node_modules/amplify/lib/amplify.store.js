!function(amplify,undefined){function createFromStorageInterface(storageType,storage){store.addType(storageType,function(key,value,options){var storedValue,parsed,i,remove,ret=value,now=(new Date).getTime();if(!key){ret={},remove=[],i=0;try{for(key=storage.length;key=storage.key(i++);)rprefix.test(key)&&(parsed=JSON.parse(storage.getItem(key)),parsed.expires&&parsed.expires<=now?remove.push(key):ret[key.replace(rprefix,"")]=parsed.data);for(;key=remove.pop();)storage.removeItem(key)}catch(error){}return ret}if(key="__amplify__"+key,value===undefined){if(storedValue=storage.getItem(key),parsed=storedValue?JSON.parse(storedValue):{expires:-1},!(parsed.expires&&parsed.expires<=now))return parsed.data;storage.removeItem(key)}else if(null===value)storage.removeItem(key);else{parsed=JSON.stringify({data:value,expires:options.expires?now+options.expires:null});try{storage.setItem(key,parsed)}catch(error){store[storageType]();try{storage.setItem(key,parsed)}catch(error){throw store.error()}}}return ret})}var store=amplify.store=function(key,value,options){var type=store.type;return options&&options.type&&options.type in store.types&&(type=options.type),store.types[type](key,value,options||{})};store.types={},store.type=null,store.addType=function(type,storage){store.type||(store.type=type),store.types[type]=storage,store[type]=function(key,value,options){return options=options||{},options.type=type,store(key,value,options)}},store.error=function(){return"amplify.store quota exceeded"};var rprefix=/^__amplify__/;for(var webStorageType in{localStorage:1,sessionStorage:1})try{window[webStorageType].setItem("__amplify__","x"),window[webStorageType].removeItem("__amplify__"),createFromStorageInterface(webStorageType,window[webStorageType])}catch(e){}if(!store.types.localStorage&&window.globalStorage)try{createFromStorageInterface("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===store.type&&(store.type="globalStorage")}catch(e){}!function(){if(!store.types.localStorage){var div=document.createElement("div"),attrKey="amplify";div.style.display="none",document.getElementsByTagName("head")[0].appendChild(div);try{div.addBehavior("#default#userdata"),div.load(attrKey)}catch(e){return void div.parentNode.removeChild(div)}store.addType("userData",function(key,value,options){div.load(attrKey);var attr,parsed,prevValue,i,remove,ret=value,now=(new Date).getTime();if(!key){for(ret={},remove=[],i=0;attr=div.XMLDocument.documentElement.attributes[i++];)parsed=JSON.parse(attr.value),parsed.expires&&parsed.expires<=now?remove.push(attr.name):ret[attr.name]=parsed.data;for(;key=remove.pop();)div.removeAttribute(key);return div.save(attrKey),ret}if(key=key.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),key=key.replace(/^-/,"_-"),value===undefined){if(attr=div.getAttribute(key),parsed=attr?JSON.parse(attr):{expires:-1},!(parsed.expires&&parsed.expires<=now))return parsed.data;div.removeAttribute(key)}else null===value?div.removeAttribute(key):(prevValue=div.getAttribute(key),parsed=JSON.stringify({data:value,expires:options.expires?now+options.expires:null}),div.setAttribute(key,parsed));try{div.save(attrKey)}catch(error){null===prevValue?div.removeAttribute(key):div.setAttribute(key,prevValue),store.userData();try{div.setAttribute(key,parsed),div.save(attrKey)}catch(error){throw null===prevValue?div.removeAttribute(key):div.setAttribute(key,prevValue),store.error()}}return ret})}}(),function(){function copy(obj){return obj===undefined?undefined:JSON.parse(JSON.stringify(obj))}var memory={},timeout={};store.addType("memory",function(key,value,options){return key?value===undefined?copy(memory[key]):(timeout[key]&&(clearTimeout(timeout[key]),delete timeout[key]),null===value?(delete memory[key],null):(memory[key]=value,options.expires&&(timeout[key]=setTimeout(function(){delete memory[key],delete timeout[key]},options.expires)),value)):copy(memory)})}()}(this.amplify=this.amplify||{});